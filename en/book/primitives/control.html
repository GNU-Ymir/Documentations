<!DOCTYPE HTML>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Control flows - Ymir Tour</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <base href="../">

        <link rel="stylesheet" href="book.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <link rel="shortcut icon" href="favicon.png">

        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">

        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme -->
        
        <link rel="stylesheet" href="custom.css">
        

        

        <!-- Fetch Clipboard.js from CDN but have a local fallback -->
        <script src="https://cdn.jsdelivr.net/clipboard.js/1.6.1/clipboard.min.js"></script>
        <script>
            if (typeof Clipboard == 'undefined') {
                document.write(unescape("%3Cscript src='clipboard.min.js'%3E%3C/script%3E"));
            }
        </script>

        <!-- Fetch JQuery from CDN but have a local fallback -->
        <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
        <script>
            if (typeof jQuery == 'undefined') {
                document.write(unescape("%3Cscript src='jquery.js'%3E%3C/script%3E"));
            }
        </script>

        <!-- Fetch store.js from local - TODO add CDN when 2.x.x is available on cdnjs -->
        <script src="store.js"></script>

    </head>
    <body class="light">
        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme = store.get('mdbook-theme');
            if (theme === null || theme === undefined) { theme = 'light'; }
            $('body').removeClass().addClass(theme);
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var sidebar = store.get('mdbook-sidebar');
            if (sidebar === "hidden") { $("html").addClass("sidebar-hidden") }
            else if (sidebar === "visible") { $("html").addClass("sidebar-visible") }
        </script>

        <div id="sidebar" class="sidebar">
            <ul class="chapter"><li><a href="README.html"><strong>1.</strong> Introduction</a></li><li><a href="hello-world/README.html"><strong>2.</strong> Hello World</a></li><li><ul class="section"><li><a href="hello-world/commentaires.html"><strong>2.1.</strong> Comments</a></li></ul></li><li><a href="primitives/README.html"><strong>3.</strong> Basic programming concepts</a></li><li><ul class="section"><li><a href="primitives/variables.html"><strong>3.1.</strong> Variable and Mutability</a></li><li><a href="primitives/types.html"><strong>3.2.</strong> Data types</a></li><li><a href="primitives/functions.html"><strong>3.3.</strong> Functions</a></li><li><a href="primitives/control.html" class="active"><strong>3.4.</strong> Control flows</a></li><li><a href="primitives/operator.html"><strong>3.5.</strong> Operator priority</a></li></ul></li><li><a href="advanced/README.html"><strong>4.</strong> Alias, References and Purity</a></li><li><ul class="section"><li><a href="advanced/references.html"><strong>4.1.</strong> References</a></li><li><a href="advanced/alias.html"><strong>4.2.</strong> Aliases</a></li><li><a href="advanced/copies.html"><strong>4.3.</strong> Copy and Deep copy</a></li><li><a href="advanced/best.html"><strong>4.4.</strong> Best practice</a></li><li><a href="advanced/pure.html"><strong>4.5.</strong> Pure values</a></li></ul></li><li><a href="modules/README.html"><strong>5.</strong> Modules</a></li><li><a href="types/README.html"><strong>6.</strong> User defined types</a></li><li><ul class="section"><li><a href="types/struct.html"><strong>6.1.</strong> Structure</a></li><li><a href="types/enum.html"><strong>6.2.</strong> Enum</a></li><li><a href="types/aka.html"><strong>6.3.</strong> Aka</a></li></ul></li><li><a href="objects/README.html"><strong>7.</strong> Objects</a></li><li><ul class="section"><li><a href="objects/class.html"><strong>7.1.</strong> Class</a></li><li><a href="objects/mutability.html"><strong>7.2.</strong> Mutability</a></li><li><a href="objects/methods.html"><strong>7.3.</strong> Methods</a></li><li><a href="objects/inheritance.html"><strong>7.4.</strong> Inheritance</a></li><li><a href="objects/traits.html"><strong>7.5.</strong> Traits</a></li><li><a href="objects/cast.html"><strong>7.6.</strong> Cast, and dynamic typing</a></li></ul></li><li><a href="functions/README.html"><strong>8.</strong> Function advanced</a></li><li><a href="pattern/README.html"><strong>9.</strong> Pattern matching</a></li><li><a href="errors/main.html"><strong>10.</strong> Error handling</a></li><li><ul class="section"><li><a href="errors/scope_guards.html"><strong>10.1.</strong> Scope guards</a></li><li><a href="errors/catching.html"><strong>10.2.</strong> Catching</a></li><li><a href="errors/option.html"><strong>10.3.</strong> Exception and option type</a></li><li><a href="errors/fptr_closure.html"><strong>10.4.</strong> Unsafe function pointer</a></li></ul></li><li><a href="templates/README.html"><strong>11.</strong> Templates</a></li><li><ul class="section"><li><a href="templates/special.html"><strong>11.1.</strong> Template types</a></li><li><a href="templates/cte.html"><strong>11.2.</strong> Template values</a></li><li><a href="templates/values.html"><strong>11.3.</strong> Compilation time execution</a></li></ul></li><li><a href="objects/common_traits.html"><strong>12.</strong> Common traits</a></li><li><ul class="section"><li><a href="traits/streamable.html"><strong>12.1.</strong> Streamable</a></li><li><a href="traits/copiable.html"><strong>12.2.</strong> Copiable</a></li><li><a href="traits/disposable.html"><strong>12.3.</strong> With guard and Disposable</a></li><li><a href="traits/hashable.html"><strong>12.4.</strong> Hashable</a></li><li><a href="traits/serialize.html"><strong>12.5.</strong> Packable and Serializable</a></li></ul></li><li><a href="templates/operators.html"><strong>13.</strong> Operator overloading</a></li><li><ul class="section"><li><a href="templates/binary.html"><strong>13.1.</strong> Unary, binary and Comparison</a></li><li><a href="templates/complex_operators.html"><strong>13.2.</strong> Access, contains and iteration</a></li></ul></li><li><a href="version/README.html"><strong>14.</strong> Version</a></li><li><a href="macros/README.html"><strong>15.</strong> Macro</a></li><li><ul class="section"><li><a href="macros/std.html"><strong>15.1.</strong> Std and Core macros</a></li></ul></li><li><a href="documentation/README.html"><strong>16.</strong> Documentation</a></li><li><ul class="section"><li><a href="documentation/types.html"><strong>16.1.</strong> Types</a></li><li><a href="documentation/symbols.html"><strong>16.2.</strong> Symbols</a></li></ul></li></ul>
        </div>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page" tabindex="-1">
                
                <div id="menu-bar" class="menu-bar">
                    <div class="left-buttons">
                        <i id="sidebar-toggle" class="fa fa-bars" title="Toggle sidebar"></i>
                        <i id="theme-toggle" class="fa fa-paint-brush" title="Change theme"></i>
                    </div>

                    <h1 class="menu-title">Ymir Tour</h1>

                    <div class="right-buttons">
                        <a href="print.html">
                            <i id="print-button" class="fa fa-print" title="Print this book"></i>
                        </a>
                    </div>
                </div>

                <div id="content" class="content">
                    <a class="header" href="primitives/control.html#control-flows" id="control-flows"><h1>Control flows</h1></a>
<p>When writing a program, the ability to decide to execute part of the
code conditionally, or to repeat part of the code, is a basic scheme
that is necessary.</p>
<a class="header" href="primitives/control.html#if-expression" id="if-expression"><h2>If expression</h2></a>
<p>An <strong><code>if</code></strong> expression is a control flow allowing to branch into the
program code by making decisions based on conditions. An <code>else</code> can be
placed after an <em>if</em> expression, to execute a part of code, if the
condition of the <em>if</em> expression is not met. The syntax of the <em>if
expression</em> is presented in the following code block.</p>
<pre><code class="language-grammar">if_expression := 'if' expression expression ('else' expression)?
</code></pre>
<p><br></p>
<p>The following source code present a basic utilization of the <em>if expression</em>.</p>
<pre><code class="language-ymir">def main () {
    let x = 5;
    
    if x &lt; 5 {
       println (&quot;X is lower than 5&quot;);
    } else if (x == 5) { // parentheses are optional
      println (&quot;X is exactly 5&quot;);
    } else {
      println (&quot;X is higher than 5&quot;);
    }
}
</code></pre>
<p><br></p>
<p>The value of an <em>if expression</em> is computed by the block of code that
is executed when branching on the condition. Each branch of the
<strong><code>if</code></strong> expression must have a value of the same type, otherwise an
error is returned by the compiler. The value of an <strong><code>if</code></strong>, can of
course be of type <strong><code>void</code></strong>.</p>
<pre><code class="language-ymir">def main () {
    let condition = true;
    let x = if condition {
        5 
    } else {
        7
    };
}
</code></pre>
<p><br></p>
<p>If there is a possibility for the program to enter none of the branch
of the <em>if expression</em>, then the value of the whole <em>if expression</em> is
of type <strong><code>void</code></strong>. For example, in the following source code, the
variable condition can be either <strong><code>true</code></strong> or <strong><code>false</code></strong>, leading to
the possibility for the <em>if expression</em> defined at line <strong>5</strong> to be
never entered, and to the possibility for that the value of <strong><code>x</code></strong> to
be never set.</p>
<pre><code class="language-ymir">def foo () -&gt; bool { // ... } // return a bool value

def main () {
    let condition = foo ();
    let x = if condition { // the condition can be false
        5 
    }; // and then the expression has no value
       // but the variable x cannot be of type void
}
</code></pre>
<p>Errors:</p>
<pre><code class="language-error">Error : incompatible types void and i32
 --&gt; main.yr:(5,10)
 5  ┃ 	let x = if condition { // the condition can be false
    ╋ 	        ^^
    ┃ Note : 
    ┃  --&gt; main.yr:(6,3)
    ┃  6  ┃ 		5 
    ┃     ╋ 		^
    ┗━━━━━┻━ 


ymir1: fatal error: 
compilation terminated.
</code></pre>
<p><br></p>
<a class="header" href="primitives/control.html#loops" id="loops"><h2>Loops</h2></a>
<p>In <em>Ymir</em>, there are three kinds of loops: <code>loop</code>, <code>while</code> and <code>for</code>.</p>
<a class="header" href="primitives/control.html#infinite-repetitions" id="infinite-repetitions"><h3>Infinite repetitions</h3></a>
<p>The keyword <strong><code>loop</code></strong> is used to specify that a scope must be
repeated endlessly. The syntax of the <strong><code>loop</code></strong> expression is the
following:</p>
<pre><code class="language-grammar">loop_expression := 'loop' expression
</code></pre>
<p><br></p>
<p>In the following example, the program will never exit, and will print,
an infinite number of times, the string <code>&quot;I will be printed an infinite number of times&quot;.</code></p>
<pre><code class="language-ymir">def main () {
    loop { // the loop will never exit
         println (&quot;I will be printed an infinite number of times&quot;);
    }
}
</code></pre>
<p><br></p>
<p>A loop can be used to repeat an action until it succeeds, e.g. waiting
for the end of a thread, or waiting for incoming network connections,
etc.  The keyword <strong><code>break</code></strong> is used to stop a loop. A <em>break
statement</em> is associated with a value, which is following the
keyword. The value of a loop is defined by the value given by the
<em>break statement</em>. Every <em>break statement</em> in a <em>loop</em> must share the
same type. A loop can evidently be of type <strong><code>void</code></strong>.</p>
<pre><code class="language-ymir">import std::io

def main () {
    let mut counter = 0;
    
    let result = loop { 
        counter += 1;
        if counter == 10 {
            break counter + 1; // stop the loop and set its value to 'counter + 1'
        }
    };
    println (&quot;Result : &quot;, result);}

</code></pre>
<p>Results:</p>
<pre><code>Result : 11
</code></pre>
<p><br></p>
<a class="header" href="primitives/control.html#loop-while-condition-is-met" id="loop-while-condition-is-met"><h3>Loop while condition is met</h3></a>
<p>The keyword <strong><code>while</code></strong> creates a loop, which repeats until a
condition is no longer satisfied. As for the <em>loop</em>, it can be broken
with the keyword <strong><code>break</code></strong>. Unlike <em>loop</em> the value of a while loop
is always of type <strong><code>void</code></strong>, because it is impossible to ensure that
the <em>while</em> is entered at all. The <em>break statement</em> must follow that
rule, and break only with values of type <strong><code>void</code></strong>.
<em>Contribution:</em>
It is planned to add the possibility to write an <em>else</em> after a <em>while
loop</em> to give a value to the <em>while loop</em> when it is not entered.</p>
<p>The grammar of the <em>while</em> loop is presented, in the following code
block.</p>
<pre><code class="language-grammar">while_expression := 'while' expression expression
</code></pre>
<p><br></p>
<p>The following example, present an utilization of a <em>while</em> loop, where
the loop iterates 10 times, while the value of <strong><code>i</code></strong> is lower than
<strong>10</strong>.</p>
<pre><code class="language-ymir">import std::io

def main () {
    let mut i = 0;
    while i &lt; 10 {
        i += 1;	
    };
    
    println (&quot;I is : &quot;, i);
}
</code></pre>
<p><br></p>
<p>Results:</p>
<pre><code>I is : 10
</code></pre>
<p><br></p>
<a class="header" href="primitives/control.html#iterate-over-a-value" id="iterate-over-a-value"><h3>Iterate over a value</h3></a>
<p>The last type of loop is the <em>for loop</em> defined with the keyword
<strong><code>for</code></strong>. Like for the <em>while loop</em> the value of a <em>for loop</em> is
always <strong><code>void</code></strong> as it is impossible to garantee that the loop is
entered even once. The <em>for loop</em> iterates over an iterable
type. Primitive iterable types are ranges, tuple, slices and static
arrays.</p>
<pre><code class="language-grammar">for_expression := 'for' ('(' var_decls ')' | var_decls) 'in' expression expression

var_decls := var_decl (',' var_decl)
var_decl := (decorator)* identifier (':' type)?

decorator := 'ref' | 'mut' | 'dmut'
</code></pre>
<p><br></p>
<p><strong>1) Iteration over a range.</strong> In the following example, the <em>for
loop</em> is used to iterate over three ranges. The first loop at line
<strong>4</strong>, iterates between <strong>0</strong> and <strong>8</strong> (not included), by a step of
<strong>2</strong>. The second loop iterate between the value <strong>10</strong> and <strong>0</strong> (not
included) with a step of <strong>-1</strong>. The third loop iterates between the
value <strong>1</strong> and <strong>6</strong> (included this time).</p>
<pre><code class="language-ymir">import std::io
    
def main () {
    for i in (0 .. 8).step_by (2) {
        println (i);
    }	
    
    for i in 10 .. 0 {
        println (i);
    }
    
    for i in 1 ... 6 {
        println (i);
    }
}
</code></pre>
<p><br></p>
<p><strong>2) iteration over slices and static arrays.</strong> Slices are iterable
types. They can be iterated using one or two variables. When only one
variable is used, it is associated with the values contained inside
the slice. When two variable are used, the first variable is
associated to the current iteration index, and the second variable to
the values contained inside the slice. Static array iteration works
the same.</p>
<pre><code class="language-ymir">import std::io;

def main () {
    let a = [10, 11, 12];
    for i in a {
        print (i, &quot; &quot;);
    }
    
    println (&quot;&quot;);
    for i, j in a {
        print (i, &quot;-&gt; &quot;, j, &quot; &quot;);
    }
    println (&quot;&quot;);
}
</code></pre>
<p>Results:</p>
<pre><code>10 11 12 
0-&gt; 10 1-&gt; 11 2-&gt; 12
</code></pre>
<p><br></p>
<p><em>Contribution</em>: the iteration by reference over mutable slice, and
mutable static arrays is currently under development.</p>
<p><strong>3) iteration over tuples.</strong> Tuple are iterable types. But unlike slice,
or range the <em>for loop</em> is evaluated at compilation time. The tuple
can be iterated using only one variable, that is associated to the
values contained inside the tuple.</p>
<pre><code class="language-ymir">import std::io 

def main () {
    let x = (1, 'r');
    for i in x { 
        println (i);
    }
    
    // Is equivalent to 
    println (x.0);
    println (x.1);
}
</code></pre>
<p><br></p>
<p>One may note that the type of the variable <strong><code>i</code></strong> in the <em>for loop</em>
of the above example changes from one iteration to another, being of
type <strong><code>i32</code></strong> at first iteration and then of type <strong><code>c32</code></strong>. For that
reason, the <em>for loop</em> is not really dynamic, but flattened at
compilation time. This does not change anything from a user
perspective, but is worth mentioning, to avoid miscomprehension of
static type system, there is no hidden dynamicity here.</p>
<a class="header" href="primitives/control.html#assertion" id="assertion"><h2>Assertion</h2></a>
<p>The expression <em>assert</em> is an expression that verify the validity of a
condition and throws an exception if the condition is false. Error are
presented in the chapter <a href="https://gnu-ymir.github.io/Documentations/en/errors/main.html">Error
Handling</a>,
thus no detail are given in this section.</p>
<pre><code class="language-ymir">def foo (i : i32) throws &amp;AssertError 
{
    assert (i &lt; 10, &quot;i must be lower than 10&quot;)
}

def main () 
    throws &amp;AssertError
{
    foo (11);
}
</code></pre>

                </div>

                <!-- Mobile navigation buttons -->
                
                    <a rel="prev" href="primitives/functions.html" class="mobile-nav-chapters previous" title="Previous chapter">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a rel="next" href="primitives/operator.html" class="mobile-nav-chapters next" title="Next chapter">
                        <i class="fa fa-angle-right"></i>
                    </a>
                

            </div>

            
                <a href="primitives/functions.html" class="nav-chapters previous" title="You can navigate through the chapters using the arrow keys">
                    <i class="fa fa-angle-left"></i>
                </a>
            

            
                <a href="primitives/operator.html" class="nav-chapters next" title="You can navigate through the chapters using the arrow keys">
                    <i class="fa fa-angle-right"></i>
                </a>
            

        </div>


        <!-- Local fallback for Font Awesome -->
        <script>
            if ($(".fa").css("font-family") !== "FontAwesome") {
                $('<link rel="stylesheet" type="text/css" href="_FontAwesome/css/font-awesome.css">').prependTo('head');
            }
        </script>

        <!-- Livereload script (if served using the cli tool) -->
        

        

        

        

        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS script -->
        
        <script type="text/javascript" src="custom.js"></script>
        

    </body>
</html>
