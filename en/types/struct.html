
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Structure Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/code.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-codeblock-filename/block.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-spoiler/spoiler.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-language-picker/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchor-nav-x/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="enum.html" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../hello-world/">
            
                <a href="../hello-world/">
            
                    
                    Hello World
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../hello-world/commentaires.html">
            
                <a href="../hello-world/commentaires.html">
            
                    
                    Comments
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../primitives/">
            
                <a href="../primitives/">
            
                    
                    Basic programming concepts
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../primitives/variables.html">
            
                <a href="../primitives/variables.html">
            
                    
                    Variable and Mutability
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../primitives/types.html">
            
                <a href="../primitives/types.html">
            
                    
                    Data types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../primitives/functions.html">
            
                <a href="../primitives/functions.html">
            
                    
                    Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../primitives/control.html">
            
                <a href="../primitives/control.html">
            
                    
                    Control flows
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../advanced/">
            
                <a href="../advanced/">
            
                    
                    Alias and References
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../advanced/references.html">
            
                <a href="../advanced/references.html">
            
                    
                    References
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../advanced/alias.html">
            
                <a href="../advanced/alias.html">
            
                    
                    Aliases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../advanced/copies.html">
            
                <a href="../advanced/copies.html">
            
                    
                    Copy and Deep copy
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="./">
            
                <a href="./">
            
                    
                    User define types
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.5.1" data-path="struct.html">
            
                <a href="struct.html">
            
                    
                    Structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="enum.html">
            
                <a href="enum.html">
            
                    
                    Enum
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../modules/">
            
                <a href="../modules/">
            
                    
                    Modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../objects/">
            
                <a href="../objects/">
            
                    
                    Objects
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../objects/class.html">
            
                <a href="../objects/class.html">
            
                    
                    Class
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../objects/inheritance.html">
            
                <a href="../objects/inheritance.html">
            
                    
                    Inheritance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../objects/traits.html">
            
                <a href="../objects/traits.html">
            
                    
                    Traits
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../objects/example.html">
            
                <a href="../objects/example.html">
            
                    
                    Example program
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../functions/">
            
                <a href="../functions/">
            
                    
                    Function advanced
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../pattern/">
            
                <a href="../pattern/">
            
                    
                    Pattern matching
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../templates/">
            
                <a href="../templates/">
            
                    
                    Templates
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../templates/special.html">
            
                <a href="../templates/special.html">
            
                    
                    Specialization
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../templates/cte.html">
            
                <a href="../templates/cte.html">
            
                    
                    Compile time execution
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../templates/values.html">
            
                <a href="../templates/values.html">
            
                    
                    Template as values
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../templates/operators.html">
            
                <a href="../templates/operators.html">
            
                    
                    Operator overloading
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../errors/main.html">
            
                <a href="../errors/main.html">
            
                    
                    Error handling
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../errors/scope.html">
            
                <a href="../errors/scope.html">
            
                    
                    Scope guards
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../version/README.md">
            
                <span>
            
                    
                    Version
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" >
            
                <span>
            
                    
                    Documentation
            
                </span>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Structure</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-minus-circle"></i><ul><li><span class="title-icon "></span><a href="#structure"><b>1. </b>Structure</a></li><ul><li><span class="title-icon "></span><a href="#structure-construction"><b>1.1. </b>Structure construction</a></li><li><span class="title-icon "></span><a href="#field-access"><b>1.2. </b>Field access</a></li><li><span class="title-icon "></span><a href="#structure-mutability"><b>1.3. </b>Structure mutability</a></li><li><span class="title-icon "></span><a href="#memory-borrowing-of-structure"><b>1.4. </b>Memory borrowing of structure</a></li><li><span class="title-icon "></span><a href="#packed-and-union"><b>1.5. </b>Packed and Union</a></li><li><span class="title-icon "></span><a href="#structure-specific-attributes"><b>1.6. </b>Structure specific attributes</a></li><ul><li><span class="title-icon "></span><a href="#attributes-of-a-type"><b>1.6.1. </b>Attributes of a type</a></li><li><span class="title-icon "></span><a href="#attributes-of-a-value"><b>1.6.2. </b>Attributes of a value</a></li></ul></ul></ul></div><a href="#structure" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="structure"><a name="structure" class="anchor-navigation-ex-anchor" href="#structure"><i class="fa fa-link" aria-hidden="true"></i></a>1. Structure</h1>
<p>Structure is a common design used in many languages to define users&apos;
custom types, which contains multiple values of different
types. Structures are similar to tuples, in terms of memory management
(can be located in the stack). Unlike tuples, structures have a name,
and all their internal fields also have a name. It can be said that
tuple are simply anonymus structures. </p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span>

<span class="token keyword">struct</span> 
<span class="token operator">|</span> x <span class="token punctuation">:</span> <span class="token basic-types">i32</span>
<span class="token operator">|</span> y <span class="token punctuation">:</span> <span class="token basic-types">i32</span> 
 <span class="token punctuation">-&gt;</span> Point<span class="token punctuation">;</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> point <span class="token operator">=</span> <span class="token function">Point</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// initialize the value of the structure</span>
    <span class="token function">println</span> <span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// structures are printable</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="structure-construction"><a name="structure-construction" class="anchor-navigation-ex-anchor" href="#structure-construction"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. Structure construction</h2>
<p>The construction of a structure is made using the same syntax as a
function call, that is to say using its identifier and a list of
parameters inside parentheses and separated by comas. Like function
calls, structure can have default values assigneted to fields. The
value of these field can be then changed using the <em>named expression</em>
syntax, which is constructed with the <code>-&gt;</code> token.</p>
<p>The algorithm for determining which value will be associated to each
field is the same as that used for the function call, and is presented
in
<a href="https://gnu-ymir.github.io/Documentations/en/primitives/functions.html" target="_blank">Function</a>.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span>

<span class="token keyword">struct</span> 
<span class="token operator">|</span> x <span class="token punctuation">:</span> <span class="token basic-types">i32</span> <span class="token operator">=</span> <span class="token number">0</span>
<span class="token operator">|</span> y <span class="token punctuation">:</span> <span class="token basic-types">i32</span> 
 <span class="token punctuation">-&gt;</span> Point<span class="token punctuation">;</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> point <span class="token operator">=</span> <span class="token function">Point</span> <span class="token punctuation">(</span>y<span class="token punctuation">-&gt;</span> <span class="token number">12</span><span class="token punctuation">,</span> x<span class="token punctuation">-&gt;</span> <span class="token number">98</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">println</span> <span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> point2 <span class="token operator">=</span> <span class="token function">Point</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">println</span> <span class="token punctuation">(</span>point2<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><br></p>
<pre class="language-"><code>main::Point(98, 12)
main::Point(0, 1)
</code></pre><p><br></p>
<h2 id="field-access"><a name="field-access" class="anchor-navigation-ex-anchor" href="#field-access"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. Field access</h2>
<p>The field of a structure are always public, and accessible using the
operator <strong><code>.</code></strong> where the left operand is a value whose type is a
structure, and the right operand is the identifier of the field.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span>

<span class="token keyword">struct</span> 
<span class="token operator">|</span> x <span class="token punctuation">:</span> <span class="token basic-types">i32</span>
<span class="token operator">|</span> y <span class="token punctuation">:</span> <span class="token basic-types">i32</span> 
 <span class="token punctuation">-&gt;</span> Point<span class="token punctuation">;</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">throws</span> <span class="token operator">&amp;</span><span class="token type">AssertError</span>
<span class="token punctuation">{</span>
    <span class="token keyword">let</span> point <span class="token operator">=</span> <span class="token function">Point</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token keyword">assert</span> <span class="token punctuation">(</span>point<span class="token punctuation">.</span>x <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> point<span class="token punctuation">.</span>y <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="structure-mutability"><a name="structure-mutability" class="anchor-navigation-ex-anchor" href="#structure-mutability"><i class="fa fa-link" aria-hidden="true"></i></a>1.3. Structure mutability</h2>
<p>The mutability of a field of a structure is defined in the structure
declaration. As with any variable declaration, the fields of a
structure are by default immutable. You can of course add the keyword
<code>mut</code> before the declaration of the field, to make it mutable. Its
mutability therefore depends on the mutability of the variable that
borrows the data from the structure.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span>

<span class="token keyword">struct</span> 
<span class="token operator">|</span> x <span class="token punctuation">:</span> <span class="token basic-types">i32</span>
<span class="token operator">|</span> <span class="token other-keyword">mut</span> y <span class="token punctuation">:</span> <span class="token basic-types">i32</span>
 <span class="token punctuation">-&gt;</span> Point<span class="token punctuation">;</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token other-keyword">mut</span> point <span class="token operator">=</span> <span class="token function">Point</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//  ^^^</span>
    <span class="token comment">// Try to remove the mut here</span>
    point<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">98</span><span class="token punctuation">;</span>

    <span class="token comment">// Try to add the following line </span>
    <span class="token comment">// point.x = 34;</span>

    <span class="token function">println</span> <span class="token punctuation">(</span>point<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="memory-borrowing-of-structure"><a name="memory-borrowing-of-structure" class="anchor-navigation-ex-anchor" href="#memory-borrowing-of-structure"><i class="fa fa-link" aria-hidden="true"></i></a>1.4. Memory borrowing of structure</h2>
<p>As explained in the chapter <a href="https://gnu-ymir.github.io/Documentations/en/advanced/" target="_blank">Alias and
References</a>,
structures are only aliasable if they contain a field whose type is
aliasable. All the fields of a structure are copied each time an
assignment is made.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span>

<span class="token keyword">struct</span> 
<span class="token operator">|</span> <span class="token other-keyword">mut</span> x <span class="token punctuation">:</span> <span class="token basic-types">i32</span>
<span class="token operator">|</span> <span class="token other-keyword">mut</span> y <span class="token punctuation">:</span> <span class="token basic-types">i32</span>
 <span class="token punctuation">-&gt;</span> Point<span class="token punctuation">;</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">throws</span> <span class="token operator">&amp;</span><span class="token type">AssertError</span>
<span class="token punctuation">{</span>
    <span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token function">Point</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token other-keyword">mut</span> p2 <span class="token operator">=</span> p<span class="token punctuation">;</span> <span class="token comment">// make a copy of the structure</span>
    p2<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token number">12</span><span class="token punctuation">;</span>

    <span class="token keyword">assert</span> <span class="token punctuation">(</span>p<span class="token punctuation">.</span>y <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">assert</span> <span class="token punctuation">(</span>p2<span class="token punctuation">.</span>y <span class="token operator">==</span> <span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="packed-and-union"><a name="packed-and-union" class="anchor-navigation-ex-anchor" href="#packed-and-union"><i class="fa fa-link" aria-hidden="true"></i></a>1.5. Packed and Union</h2>
<p>This part only concerns advanced programming paradigms, and is close
to the machine level. I don&apos;t think you&apos;ll ever need it, unless you
try to optimize your code at a binary level.</p>
<p>The size of a structure is calculated by the compiler, which decides
the alignment of the different fields. This is why the size of a
structure containing an <code>i64&apos; and a</code>c8&apos;<code>is</code>16<code>bytes, not</code>9<code>bytes. There is no guarantee about the size or the order of the fields
in the generated program. To force the compiler to remove the
optimized alignment, you can use the</code>packed` modifier.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span>

<span class="token keyword">struct</span> <span class="token operator">@</span>packed
<span class="token operator">|</span> x <span class="token punctuation">:</span> <span class="token basic-types">i64</span>
<span class="token operator">|</span> c <span class="token punctuation">:</span> <span class="token basic-types">c8</span>
 <span class="token punctuation">-&gt;</span> Packed<span class="token punctuation">;</span>

<span class="token keyword">struct</span> 
<span class="token operator">|</span> x <span class="token punctuation">:</span> <span class="token basic-types">i64</span>
<span class="token operator">|</span> c <span class="token punctuation">:</span> <span class="token basic-types">c8</span>
 <span class="token punctuation">-&gt;</span> Unpacked<span class="token punctuation">;</span>


<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span> <span class="token punctuation">(</span><span class="token string">&quot;Size of packed : &quot;</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span> Packed<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">println</span> <span class="token punctuation">(</span><span class="token string">&quot;Size of unpacked : &quot;</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span> Unpacked<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<pre class="language-"><code>Size of packed : 9
Size of unpacked : 16
</code></pre><p>The <code>union</code> modifier, on the other hand, tells the compiler that all
fields in the structure must share the same memory location. The size
of the structure will then be the size of its largest field.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span>

<span class="token keyword">struct</span> <span class="token operator">@</span>union
<span class="token operator">|</span> x <span class="token punctuation">:</span> <span class="token basic-types">i32</span>
<span class="token operator">|</span> y <span class="token punctuation">:</span> <span class="token type">f32</span>
 <span class="token punctuation">-&gt;</span> Dummy<span class="token punctuation">;</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">throws</span> <span class="token operator">&amp;</span><span class="token type">AssertError</span>
<span class="token punctuation">{</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token function">Dummy</span> <span class="token punctuation">(</span>y<span class="token punctuation">-&gt;</span> <span class="token number">12</span><span class="token punctuation">.</span>0f<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">assert</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>x <span class="token operator">==</span> <span class="token number">1094713344</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>As you can see, the construction of the Union requires only one
argument. You cannot give several arguments when building a union, as
they would be contradictory. The argument must also be passed as a
<em>named expression</em> (using the <code>-&gt;</code> token).</p>
<h2 id="structure-specific-attributes"><a name="structure-specific-attributes" class="anchor-navigation-ex-anchor" href="#structure-specific-attributes"><i class="fa fa-link" aria-hidden="true"></i></a>1.6. Structure specific attributes</h2>
<h3 id="attributes-of-a-type"><a name="attributes-of-a-type" class="anchor-navigation-ex-anchor" href="#attributes-of-a-type"><i class="fa fa-link" aria-hidden="true"></i></a>1.6.1. Attributes of a type</h3>
<p>Structure have type specific attributes, as any types, accessible with
the token <strong><code>::</code></strong>. The table below presents these specific
attributes. These attributes are accessible using a type of struct,
and not a value. A example, under the table presents usage of struct
specific attributes.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>init</code></td>
<td>The initial value of the type</td>
</tr>
<tr>
<td><code>typeid</code></td>
<td>The name of the type stored in a value of type <strong><code>[c32]</code></strong></td>
</tr>
<tr>
<td><code>typeinfo</code></td>
<td>A structure of type TypeInfo, containing information about the type</td>
</tr>
</tbody>
</table>
<p>All the information about TypeInfo are presented in chapter <a href="">Dynamic types</a>.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">mod</span> main<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span><span class="token punctuation">;</span>

<span class="token keyword">struct</span>
<span class="token operator">|</span> x <span class="token punctuation">:</span> <span class="token basic-types">i32</span>
<span class="token operator">|</span> y <span class="token punctuation">:</span> <span class="token basic-types">i32</span> <span class="token operator">=</span> <span class="token number">9</span>
 <span class="token punctuation">-&gt;</span> Point<span class="token punctuation">;</span> 

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">throws</span> <span class="token operator">&amp;</span><span class="token type">AssertError</span>
<span class="token punctuation">{</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token path">Point</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">init</span><span class="token punctuation">;</span>

    <span class="token comment">// the structure is declared in the main module, thus its name is main::Point    </span>
    <span class="token keyword">assert</span> <span class="token punctuation">(</span><span class="token path">Point</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">typeid</span> <span class="token operator">==</span> <span class="token string">&quot;main::Point&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">assert</span> <span class="token punctuation">(</span>x<span class="token punctuation">.</span>x <span class="token operator">==</span> <span class="token basic-types">i32</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">init</span> <span class="token operator">&amp;&amp;</span> x<span class="token punctuation">.</span>y <span class="token operator">==</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="attributes-of-a-value"><a name="attributes-of-a-value" class="anchor-navigation-ex-anchor" href="#attributes-of-a-value"><i class="fa fa-link" aria-hidden="true"></i></a>1.6.2. Attributes of a value</h3>
<p>Value of type struct have also specific attributes accessible using
the token <strong><code>::</code></strong>. This token is used because it will generate
another values of a different types at compile time, and these values
are not contained inside the structure. The table below lists the
specific attributes accessible using a value of type struct.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>tupleof</code></td>
<td>Create a immutable tuple value from the struct value</td>
</tr>
<tr>
<td><code>fields_address</code></td>
<td>Used for low level operation. Create a tuple where each field is the address of the field if the struct</td>
</tr>
</tbody>
</table>
<p>An simple example of <code>tupleof</code> and <code>fields_address</code> is presented in
the following source code. The mutability of the pointers in the tuple
created by <code>fields_address</code> is the same mutability as those of the
fields of the creator struct. This attributes is used in the <code>std</code> for
low level operations, and as for pointer we do not recommand to use
this attribute unless, you know exactly what you are doing. In a
previous section, we presented that there is no guarantee on the
alignment and order of the fields in the structure in the compiled
program. The interest of <code>fields_address</code> attribute is to bypass this
limitation, when writing code that need access to the fields without
knowing the name of the fields (basically some <code>std</code> function uses
that capacity).</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">struct</span>
<span class="token operator">|</span> x <span class="token punctuation">:</span> <span class="token basic-types">i32</span>
<span class="token operator">|</span> <span class="token other-keyword">mut</span> y <span class="token punctuation">:</span> <span class="token basic-types">i32</span>
 <span class="token punctuation">-&gt;</span> Point<span class="token punctuation">;</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">throws</span> <span class="token operator">&amp;</span><span class="token type">AssertError</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span><span class="token type">SegFault</span>
<span class="token punctuation">{</span>
    <span class="token keyword">let</span> <span class="token other-keyword">mut</span> point <span class="token operator">=</span> <span class="token function">Point</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token path">point</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">tupleof</span><span class="token punctuation">;</span>

    <span class="token keyword">assert</span> <span class="token punctuation">(</span>x <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> y <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> <span class="token other-keyword">mut</span> addrs <span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token basic-types">i32</span><span class="token punctuation">,</span> <span class="token other-keyword">dmut</span> <span class="token operator">&amp;</span><span class="token basic-types">i32</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token other-keyword">alias</span> <span class="token punctuation">(</span><span class="token path">point</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">fields_address</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//                                  ^^^^^</span>
    <span class="token comment">// The alias is mandatory, we try to borrow data using a pointer, which is an aliasable type</span>
    <span class="token comment">// The first element of addrs can&apos;t be mutable, because x is not mutable in the structure</span>

    <span class="token operator">*</span><span class="token punctuation">(</span>addrs<span class="token punctuation">.</span>_1<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span> <span class="token comment">// modifying &apos;y&apos; value of point</span>

    <span class="token keyword">assert</span> <span class="token punctuation">(</span>point<span class="token punctuation">.</span>y <span class="token operator">==</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> imut_addrs <span class="token operator">=</span> <span class="token path">point</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">fields_address</span><span class="token punctuation">;</span> <span class="token comment">// here not need for alias</span>
    <span class="token keyword">assert</span> <span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span>imut_addrs<span class="token punctuation">.</span>_1<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: User define types">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="enum.html" class="navigation navigation-next " aria-label="Next page: Enum">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Structure","level":"1.5.1","depth":2,"next":{"title":"Enum","level":"1.5.2","depth":2,"path":"types/enum.md","ref":"types/enum.md","articles":[]},"previous":{"title":"User define types","level":"1.5","depth":1,"path":"types/README.md","ref":"types/README.md","articles":[{"title":"Structure","level":"1.5.1","depth":2,"path":"types/struct.md","ref":"types/struct.md","articles":[]},{"title":"Enum","level":"1.5.2","depth":2,"path":"types/enum.md","ref":"types/enum.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["prism","-highlight","katex","codeblock-filename","spoiler","folding-menu","language-picker","anchor-nav-x","code"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"css":["themes/code.css"]},"spoiler":{},"language-picker":{"grid-columns":3},"search":{},"folding-menu":{"animationDuration":400,"sticky":false},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"code":{"copyButtons":true},"katex":{},"fontsettings":{"theme":"white","family":"sans","size":2},"anchor-navigation-ex":{"isRewritePageTitle":false},"codeblock-filename":{},"anchor-nav-x":{"associatedWithSummary":true,"float":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showLevel":true},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"types/struct.md","mtime":"2021-02-15T15:12:12.352Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-02-15T19:42:51.511Z"},"basePath":"..","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-spoiler/spoiler.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-folding-menu/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-language-picker/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-anchor-nav-x/lib/handler.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

