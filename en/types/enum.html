
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Enum Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/code.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-codeblock-filename/block.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-spoiler/spoiler.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-language-picker/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchor-nav-x/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="aka.html" />
    
    
    <link rel="prev" href="struct.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../hello-world/">
            
                <a href="../hello-world/">
            
                    
                    Hello World
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../hello-world/commentaires.html">
            
                <a href="../hello-world/commentaires.html">
            
                    
                    Comments
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../primitives/">
            
                <a href="../primitives/">
            
                    
                    Basic programming concepts
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../primitives/variables.html">
            
                <a href="../primitives/variables.html">
            
                    
                    Variable and Mutability
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../primitives/types.html">
            
                <a href="../primitives/types.html">
            
                    
                    Data types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../primitives/functions.html">
            
                <a href="../primitives/functions.html">
            
                    
                    Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../primitives/control.html">
            
                <a href="../primitives/control.html">
            
                    
                    Control flows
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../primitives/operator.html">
            
                <a href="../primitives/operator.html">
            
                    
                    Operator priority
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../advanced/">
            
                <a href="../advanced/">
            
                    
                    Alias and References
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../advanced/references.html">
            
                <a href="../advanced/references.html">
            
                    
                    References
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../advanced/alias.html">
            
                <a href="../advanced/alias.html">
            
                    
                    Aliases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../advanced/copies.html">
            
                <a href="../advanced/copies.html">
            
                    
                    Copy and Deep copy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../advanced/best.html">
            
                <a href="../advanced/best.html">
            
                    
                    Best practice
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../modules/">
            
                <a href="../modules/">
            
                    
                    Modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="./">
            
                <a href="./">
            
                    
                    User defined types
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="struct.html">
            
                <a href="struct.html">
            
                    
                    Structure
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.6.2" data-path="enum.html">
            
                <a href="enum.html">
            
                    
                    Enum
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="aka.html">
            
                <a href="aka.html">
            
                    
                    Aka
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../objects/">
            
                <a href="../objects/">
            
                    
                    Objects
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../objects/class.html">
            
                <a href="../objects/class.html">
            
                    
                    Class
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../objects/mutability.html">
            
                <a href="../objects/mutability.html">
            
                    
                    Mutability
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../objects/methods.html">
            
                <a href="../objects/methods.html">
            
                    
                    Methods
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../objects/inheritance.html">
            
                <a href="../objects/inheritance.html">
            
                    
                    Inheritance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../objects/traits.html">
            
                <a href="../objects/traits.html">
            
                    
                    Traits
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="../objects/cast.html">
            
                <a href="../objects/cast.html">
            
                    
                    Cast, and dynamic typing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../functions/">
            
                <a href="../functions/">
            
                    
                    Function advanced
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../pattern/">
            
                <a href="../pattern/">
            
                    
                    Pattern matching
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../errors/main.html">
            
                <a href="../errors/main.html">
            
                    
                    Error handling
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../errors/scope_guards.html">
            
                <a href="../errors/scope_guards.html">
            
                    
                    Scope guards
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../errors/catching.html">
            
                <a href="../errors/catching.html">
            
                    
                    Catching
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../errors/option.html">
            
                <a href="../errors/option.html">
            
                    
                    Exception and option type
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="../errors/fptr_closure.html">
            
                <a href="../errors/fptr_closure.html">
            
                    
                    Unsafe function pointer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../templates/">
            
                <a href="../templates/">
            
                    
                    Templates
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../templates/special.html">
            
                <a href="../templates/special.html">
            
                    
                    Template types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="../templates/cte.html">
            
                <a href="../templates/cte.html">
            
                    
                    Template values
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="../templates/values.html">
            
                <a href="../templates/values.html">
            
                    
                    Compilation time execution
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../objects/common_traits.html">
            
                <a href="../objects/common_traits.html">
            
                    
                    Common traits
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../traits/streamable.html">
            
                <a href="../traits/streamable.html">
            
                    
                    Streamable
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../traits/copiable.html">
            
                <a href="../traits/copiable.html">
            
                    
                    Copiable
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../traits/disposable.html">
            
                <a href="../traits/disposable.html">
            
                    
                    With guard and Disposable
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="../traits/hashable.html">
            
                <a href="../traits/hashable.html">
            
                    
                    Hashable
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.5" data-path="../traits/serialize.html">
            
                <a href="../traits/serialize.html">
            
                    
                    Packable and Serializable
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../templates/operators.html">
            
                <a href="../templates/operators.html">
            
                    
                    Operator overloading
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../version/README.md">
            
                <span>
            
                    
                    Version
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" >
            
                <span>
            
                    
                    Documentation
            
                </span>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Enum</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-minus-circle"></i><ul><li><span class="title-icon "></span><a href="#enumeration"><b>1. </b>Enumeration</a></li><ul><li><span class="title-icon "></span><a href="#value-access"><b>1.1. </b>Value access</a></li><ul><li><span class="title-icon "></span><a href="#value-types"><b>1.1.1. </b>Value types</a></li><li><span class="title-icon "></span><a href="#value-constructions"><b>1.1.2. </b>Value constructions</a></li><li><span class="title-icon "></span><a href="#value-context"><b>1.1.3. </b>Value context</a></li></ul><li><span class="title-icon "></span><a href="#enumeration-specific-attributes"><b>1.2. </b>Enumeration specific attributes</a></li></ul></ul></div><a href="#enumeration" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="enumeration"><a name="enumeration" class="anchor-navigation-ex-anchor" href="#enumeration"><i class="fa fa-link" aria-hidden="true"></i></a>1. Enumeration</h1>
<p>Enumerations are user-defined types that enumerates a list of
values. The keyword <code>enum</code> is used to define an enumeration type. The
type of the fields can be inferred from the value associated to the
fields. This type can be forced using the type operator <strong><code>:</code></strong>, after
the keyword <strong><code>enum</code></strong>. All the fields of an enumeration shares the
same type.</p>
<p>The complete grammar of an enumeration is presented in the following
source block. As for struct declaration, templates can be used, but
this functionnality will only be discussed in the
<a href="https://gnu-ymir.github.io/Documentations/en/templates/" target="_blank">Templates</a>
chapter.</p>
<pre class="language-"><code class="lang-grammar"><span class="token path">enum_type</span> <span class="token punctuation">:</span><span class="token operator">=</span> <span class="token string">&apos;enum&apos;</span> <span class="token punctuation">(</span><span class="token string">&apos;:&apos;</span> type<span class="token punctuation">)</span>? <span class="token punctuation">(</span>inner_value<span class="token punctuation">)</span><span class="token operator">+</span> <span class="token string">&apos;-&gt;&apos;</span> identifier <span class="token punctuation">(</span>templates<span class="token punctuation">)</span>?<span class="token punctuation">;</span>
<span class="token path">inner_value</span> <span class="token punctuation">:</span><span class="token operator">=</span> <span class="token string">&apos;|&apos;</span> identifier <span class="token string">&apos;=&apos;</span> expression
<span class="token path">identifier</span> <span class="token punctuation">:</span><span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">&apos;_&apos;</span><span class="token punctuation">)</span><span class="token operator">*</span> <span class="token punctuation">[</span>A<span class="token operator">-</span>z<span class="token punctuation">]</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>A<span class="token operator">-</span>z0<span class="token operator">-</span>9_<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">*</span>
</code></pre>
<p><br></p>
<p>In the following source code, an example of an enumeration of type
<strong><code>[c32]</code></strong> is presented. This enumeration lists the names of the
days.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span>

<span class="token keyword">enum</span>
<span class="token operator">|</span> MONDAY <span class="token operator">=</span> <span class="token string">&quot;Mon&quot;</span>
<span class="token operator">|</span> TUESDAY <span class="token operator">=</span> <span class="token string">&quot;Tue&quot;</span>
<span class="token operator">|</span> WEDNESDAY <span class="token operator">=</span> <span class="token string">&quot;Wed&quot;</span>
<span class="token operator">|</span> THURSDAY <span class="token operator">=</span> <span class="token string">&quot;Thu&quot;</span>
<span class="token operator">|</span> FRIDAY <span class="token operator">=</span> <span class="token string">&quot;Fri&quot;</span>
<span class="token operator">|</span> SATURDAY <span class="token operator">=</span> <span class="token string">&quot;Sat&quot;</span>
<span class="token operator">|</span> SUNDAY <span class="token operator">=</span> <span class="token string">&quot;Sun&quot;</span>
 <span class="token punctuation">-&gt;</span> Day<span class="token punctuation">;</span>

<span class="token keyword">def</span> <span class="token function">foo</span> <span class="token punctuation">(</span>day <span class="token punctuation">:</span> <span class="token type">Day</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span> <span class="token punctuation">(</span>day<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> d <span class="token operator">=</span> <span class="token path">Day</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">MONDAY</span><span class="token punctuation">;</span>
    <span class="token function">foo</span> <span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<h2 id="value-access"><a name="value-access" class="anchor-navigation-ex-anchor" href="#value-access"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. Value access</h2>
<p>The values of an enumeration are accessible using the double colon
binary operator <strong><code>::</code></strong>. In practice, access a value of the
enumeration will past the content value of the field at the caller
location. The value - result of the expression - is of the type of the
enumeration (for example the type <strong><code>Day</code></strong> in the example below).</p>
<h3 id="value-types"><a name="value-types" class="anchor-navigation-ex-anchor" href="#value-types"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.1. Value types</h3>
<p>An example of enumeration access is presented in the following source
code. In this example, implicit casting is perform from a <strong><code>Day</code></strong> to
a <strong><code>[c32]</code></strong>, when calling the function <strong><code>foo</code></strong>, at line
<strong>23</strong>. This implicit cast is allowed.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span>

<span class="token keyword">enum</span> <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token basic-types">c32</span><span class="token punctuation">]</span> <span class="token comment">// the type is optional</span>
<span class="token operator">|</span> MONDAY <span class="token operator">=</span> <span class="token string">&quot;Mon&quot;</span>
<span class="token operator">|</span> TUESDAY <span class="token operator">=</span> <span class="token string">&quot;Tue&quot;</span>
<span class="token operator">|</span> WEDNESDAY <span class="token operator">=</span> <span class="token string">&quot;Wed&quot;</span>
<span class="token operator">|</span> THURSDAY <span class="token operator">=</span> <span class="token string">&quot;Thu&quot;</span>
<span class="token operator">|</span> FRIDAY <span class="token operator">=</span> <span class="token string">&quot;Fri&quot;</span>
<span class="token operator">|</span> SATURDAY <span class="token operator">=</span> <span class="token string">&quot;Sat&quot;</span>
<span class="token operator">|</span> SUNDAY <span class="token operator">=</span> <span class="token string">&quot;Sun&quot;</span>
 <span class="token punctuation">-&gt;</span> Day<span class="token punctuation">;</span>

<span class="token keyword">def</span> <span class="token function">foo</span> <span class="token punctuation">(</span>day <span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token basic-types">c32</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span> <span class="token punctuation">(</span>day<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">bar</span> <span class="token punctuation">(</span>day <span class="token punctuation">:</span> <span class="token type">Day</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span> <span class="token punctuation">(</span>day<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// the internal type Day is of type [c32], so it can be implicitely casted into [c32]</span>
    <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token path">Day</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">MONDAY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">bar</span> <span class="token punctuation">(</span><span class="token path">Day</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">MONDAY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// However, it is impossible to transform a [c32] into a Day implicitely</span>
    <span class="token function">bar</span> <span class="token punctuation">(</span><span class="token string">&quot;Mon&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<p><br></p>
<p>However, the contrary is not allowed, because the source code tries to
cast a <strong><code>[c32]</code></strong> into a <strong><code>Day</code></strong> at line <strong>28</strong>, the compiler
returns an error. The error is presented in the code block below. Such
cast is forbidden, to avoid enumeration value to contain a value that
is actually not defined in the list of the field of the
enumeration. For example, if this was accepted, the string
<strong><code>&quot;NotADay&quot;</code></strong> would be castable into a <strong><code>Day</code></strong> (<em>note:</em> the value
of the string being possibly unknown at compilation time).</p>
<pre class="language-"><code class="lang-error"><span class="token path">Error</span> : the call operator is not defined for main::bar and {mut [c32]}
 <span class="token comment">--&gt; main.yr:(28,9)</span>
28  &#x2503;     bar (&quot;Mon&quot;)
    &#x254B;         ^     ^
    &#x2503; <span class="token other-keyword">Note</span> : candidate bar <span class="token comment">--&gt; main.yr:(17,5) : main::bar (day : main::Day([c32]))-&gt; void</span>
    &#x2503;     &#x2503; <span class="token path">Error</span> : incompatible types main::Day and mut [c32]
    &#x2503;     &#x2503;  <span class="token comment">--&gt; main.yr:(28,10)</span>
    &#x2503;     &#x2503; 28  &#x2503;     bar (&quot;Mon&quot;)
    &#x2503;     &#x2503;     &#x254B;          ^
    &#x2503;     &#x2503; <span class="token other-keyword">Note</span> : for parameter day <span class="token comment">--&gt; main.yr:(17,10) of main::bar (day : main::Day([c32]))-&gt; void</span>
    &#x2503;     &#x2517;&#x2501;&#x2501;&#x2501;&#x2501;&#x2501;&#x2501; 
    &#x2517;&#x2501;&#x2501;&#x2501;&#x2501;&#x2501;&#x253B;&#x2501; 


ymir1: <span class="token path">fatal error</span>: 
compilation terminated.
</code></pre>
<p><br></p>
<h3 id="value-constructions"><a name="value-constructions" class="anchor-navigation-ex-anchor" href="#value-constructions"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.2. Value constructions</h3>
<p>Enumeration values can be more complex than literals. Any kind of
value can be used, for example call functions, condition block, scope
guards, etc. In the following example, an enumeration creating
structure from function call is presented. The type of the enumeration
is <strong><code>Ipv4Addr</code></strong>.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span>

<span class="token keyword">struct</span>
<span class="token operator">|</span> a <span class="token punctuation">:</span> <span class="token basic-types">i32</span>
<span class="token operator">|</span> b <span class="token punctuation">:</span> <span class="token basic-types">i32</span>
<span class="token operator">|</span> c <span class="token punctuation">:</span> <span class="token basic-types">i32</span>
<span class="token operator">|</span> d <span class="token punctuation">:</span> <span class="token basic-types">i32</span>
 <span class="token punctuation">-&gt;</span> Ipv4Addr<span class="token punctuation">;</span>

<span class="token keyword">enum</span>
<span class="token operator">|</span> LOCALHOST <span class="token operator">=</span> <span class="token function">localhost</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">|</span> BROADCAST <span class="token operator">=</span> <span class="token function">broadcast</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token punctuation">-&gt;</span> KnownAddr<span class="token punctuation">;</span>

<span class="token keyword">def</span> <span class="token function">localhost</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">-&gt;</span> Ipv4Addr <span class="token punctuation">{</span>
    <span class="token function">println</span> <span class="token punctuation">(</span><span class="token string">&quot;Call localhost&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">Ipv4Addr</span> <span class="token punctuation">(</span><span class="token number">127</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">broadcast</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">-&gt;</span> Ipv4Addr <span class="token punctuation">{</span>
    <span class="token function">println</span> <span class="token punctuation">(</span><span class="token string">&quot;Call broadcast&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
    <span class="token function">Ipv4Addr</span> <span class="token punctuation">(</span><span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">,</span> <span class="token number">255</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">throws</span> <span class="token operator">&amp;</span><span class="token type">AssertError</span>
<span class="token punctuation">{</span>
    <span class="token keyword">let</span> addr <span class="token operator">=</span> <span class="token path">KnownAddr</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">LOCALHOST</span><span class="token punctuation">;</span> <span class="token comment">// will call localhost here</span>

    <span class="token keyword">assert</span> <span class="token punctuation">(</span><span class="token path">KnownAddr</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">LOCALHOST</span><span class="token punctuation">.</span>a <span class="token operator">==</span> <span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// a second time here</span>
    <span class="token keyword">assert</span> <span class="token punctuation">(</span><span class="token path">KnownAddr</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">BROADCAST</span><span class="token punctuation">.</span>d <span class="token operator">==</span> <span class="token number">255</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// call broadcast here</span>
    <span class="token keyword">assert</span> <span class="token punctuation">(</span>addr<span class="token punctuation">.</span>a <span class="token operator">==</span> <span class="token number">127</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><br></p>
<p>The enumeration value of a field is constructed at each access, this
means for example that when enumeration values are constructed using
function call, the function is called each time the enumeration field
is accessed. Thus the result of the execution of the compiled source
code above is the following:</p>
<pre class="language-"><code>Call localhost
Call localhost
Call broadcast
</code></pre><p><br></p>
<h3 id="value-context"><a name="value-context" class="anchor-navigation-ex-anchor" href="#value-context"><i class="fa fa-link" aria-hidden="true"></i></a>1.1.3. Value context</h3>
<p>If the value of the enumeration seems to be passed at the caller
location, they don&apos;t share the context of the caller. In other words,
the fields of an enumeration have access to the symbol accessible from
the enumeration context, and not from the caller context. An example,
of enumeration trying to access symbols is presented in the source
code bellow.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span>

<span class="token keyword">static</span> __GLOB__ <span class="token operator">=</span> <span class="token other-keyword">true</span><span class="token punctuation">;</span>

<span class="token keyword">enum</span> 
<span class="token operator">|</span> FOO <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span>x<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token number">42</span> <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token number">11</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token operator">|</span> BAR <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">if</span> <span class="token punctuation">(</span>__GLOB__<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token number">42</span> <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token number">11</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
 <span class="token punctuation">-&gt;</span> ErrorEnum<span class="token punctuation">;</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token other-keyword">false</span><span class="token punctuation">;</span>

    <span class="token function">println</span> <span class="token punctuation">(</span><span class="token path">ErrorEnum</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">FOO</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
</code></pre>
<p><br> </p>
<p>From the above example, the compiler returns an error. In this error,
the compiler informs that the variable <strong><code>x</code></strong> is not defined from the
context of the enumeration. Even if the variable is declared inside
the <strong><code>main</code></strong> function, it is not accessible from the enumeration
context. The global variable <strong><code>__GLOB__</code></strong> is accessible from the
enumeration context, and thus accessing it is not an issue.</p>
<pre class="language-"><code class="lang-error"><span class="token other-keyword">Note</span> : 
 <span class="token comment">--&gt; main.yr:(6,3)</span>
 6  &#x2503; | FOO = (if (x) { 42 } else { 11 })
    &#x254B;   ^^^
    &#x2503; <span class="token path">Error</span> : undefined symbol x
    &#x2503;  <span class="token comment">--&gt; main.yr:(6,14)</span>
    &#x2503;  6  &#x2503; | FOO = (if (x) { 42 } else { 11 })
    &#x2503;     &#x254B;              ^
    &#x2517;&#x2501;&#x2501;&#x2501;&#x2501;&#x2501;&#x253B;&#x2501; 

<span class="token other-keyword">Note</span> : 
 <span class="token comment">--&gt; main.yr:(13,11)</span>
13  &#x2503;     println (ErrorEnum::FOO); 
    &#x254B;              ^^^^^^^^^
    &#x2503; <span class="token path">Error</span> : the type main::ErrorEnum is not complete due to previous errors
    &#x2503;  <span class="token comment">--&gt; main.yr:(8,5)</span>
    &#x2503;  8  &#x2503;  -&gt; ErrorEnum;
    &#x2503;     &#x254B;     ^^^^^^^^^
    &#x2503;     &#x2503; <span class="token other-keyword">Note</span> : 
    &#x2503;     &#x2503;  <span class="token comment">--&gt; main.yr:(13,11)</span>
    &#x2503;     &#x2503; 13  &#x2503;     println (ErrorEnum::FOO); 
    &#x2503;     &#x2503;     &#x254B;              ^^^^^^^^^
    &#x2503;     &#x2517;&#x2501;&#x2501;&#x2501;&#x2501;&#x2501;&#x253B;&#x2501; 
    &#x2517;&#x2501;&#x2501;&#x2501;&#x2501;&#x2501;&#x253B;&#x2501; 


ymir1: <span class="token path">fatal error</span>: 
compilation terminated.
</code></pre>
<h2 id="enumeration-specific-attributes"><a name="enumeration-specific-attributes" class="anchor-navigation-ex-anchor" href="#enumeration-specific-attributes"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. Enumeration specific attributes</h2>
<p>As for any type, enumeration have specific type attributes. The table
below lists the enumeration type specific attributes.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>members</code></td>
<td>A slice containing all the values of the enumeration</td>
</tr>
<tr>
<td><code>member_names</code></td>
<td>A slice of [c32], containing all the names of the fields of the enumeration (same order than <code>members</code>)</td>
</tr>
<tr>
<td><code>typeid</code></td>
<td>The type identifier of the enumeration type in a <code>[c32]</code> typed value</td>
</tr>
<tr>
<td><code>typeinfo</code></td>
<td>The typeinfo of the inner type of the enumeration (cf. <a href="">Dynamic types</a>)</td>
</tr>
<tr>
<td><code>inner</code></td>
<td>The inner type of the enumeration</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>One may note that the operator to access specific attributes and field
is the same (double colon binary operator <strong><code>::</code></strong>), and therefore
that if an enumeration have a field named as a specific attributes
there is a conflict. To avoid conflict, the priority is given to the
fields of the enumeration, and specific attributes can be accessed
using their identifier surrounded by <strong><code>_</code></strong> tokens. For example,
accessing the <code>members</code> specific attributes can be made using the
identifier <code>__members__</code>. An example of the principle is presented in
the following source code. The specific attribute surrounding is
applicable to all types, but can be really usefull here.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">mod</span> main<span class="token punctuation">;</span>

<span class="token keyword">enum</span>
<span class="token operator">|</span> typeid       <span class="token operator">=</span> <span class="token number">1</span>
<span class="token operator">|</span> typeinfo     <span class="token operator">=</span> <span class="token number">2</span>
<span class="token operator">|</span> members      <span class="token operator">=</span> <span class="token number">3</span>
<span class="token operator">|</span> member_names <span class="token operator">=</span> <span class="token number">4</span>
<span class="token operator">|</span> inner        <span class="token operator">=</span> <span class="token number">5</span>
 <span class="token punctuation">-&gt;</span> AnnoyingEnum<span class="token punctuation">;</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">throws</span> <span class="token operator">&amp;</span><span class="token type">AssertError</span>
<span class="token punctuation">{</span>
    <span class="token keyword">assert</span> <span class="token punctuation">(</span><span class="token path">AnnoyingEnum</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">typeid</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">assert</span> <span class="token punctuation">(</span><span class="token path">AnnoyingEnum</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">__typeid</span> <span class="token operator">==</span> <span class="token path">AnnoyingEnum</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">__typeid__</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">assert</span> <span class="token punctuation">(</span><span class="token path">AnnoyingEnum</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">__typeid</span> <span class="token operator">==</span> <span class="token string">&quot;main::AnnoyingEnum&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    
<span class="token punctuation">}</span>
</code></pre>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="struct.html" class="navigation navigation-prev " aria-label="Previous page: Structure">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="aka.html" class="navigation navigation-next " aria-label="Next page: Aka">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Enum","level":"1.6.2","depth":2,"next":{"title":"Aka","level":"1.6.3","depth":2,"path":"types/aka.md","ref":"types/aka.md","articles":[]},"previous":{"title":"Structure","level":"1.6.1","depth":2,"path":"types/struct.md","ref":"types/struct.md","articles":[]},"dir":"ltr"},"config":{"plugins":["prism","-highlight","katex","codeblock-filename","spoiler","folding-menu","language-picker","anchor-nav-x","code"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"css":["themes/code.css"]},"spoiler":{},"language-picker":{"grid-columns":3},"search":{},"folding-menu":{"animationDuration":400,"sticky":false},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"code":{"copyButtons":true},"katex":{},"fontsettings":{"theme":"white","family":"sans","size":2},"anchor-navigation-ex":{"isRewritePageTitle":false,"toolTipMode":"click"},"codeblock-filename":{},"anchor-nav-x":{"associatedWithSummary":true,"float":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showLevel":true},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"types/enum.md","mtime":"2021-06-05T04:09:22.591Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-06-17T05:03:31.114Z"},"basePath":"..","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-spoiler/spoiler.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-folding-menu/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-language-picker/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-anchor-nav-x/lib/handler.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

