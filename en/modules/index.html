
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Modules Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/code.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-codeblock-filename/block.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-spoiler/spoiler.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-language-picker/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchor-nav-x/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../types/" />
    
    
    <link rel="prev" href="../advanced/pure.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../hello-world/">
            
                <a href="../hello-world/">
            
                    
                    Hello World
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../hello-world/commentaires.html">
            
                <a href="../hello-world/commentaires.html">
            
                    
                    Comments
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../primitives/">
            
                <a href="../primitives/">
            
                    
                    Basic programming concepts
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../primitives/variables.html">
            
                <a href="../primitives/variables.html">
            
                    
                    Variable and Mutability
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../primitives/types.html">
            
                <a href="../primitives/types.html">
            
                    
                    Data types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../primitives/functions.html">
            
                <a href="../primitives/functions.html">
            
                    
                    Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../primitives/control.html">
            
                <a href="../primitives/control.html">
            
                    
                    Control flows
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../primitives/operator.html">
            
                <a href="../primitives/operator.html">
            
                    
                    Operator priority
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../advanced/">
            
                <a href="../advanced/">
            
                    
                    Alias, References and Purity
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../advanced/references.html">
            
                <a href="../advanced/references.html">
            
                    
                    References
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../advanced/alias.html">
            
                <a href="../advanced/alias.html">
            
                    
                    Aliases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../advanced/copies.html">
            
                <a href="../advanced/copies.html">
            
                    
                    Copy and Deep copy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../advanced/best.html">
            
                <a href="../advanced/best.html">
            
                    
                    Best practice
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../advanced/pure.html">
            
                <a href="../advanced/pure.html">
            
                    
                    Pure values
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="1.5" data-path="./">
            
                <a href="./">
            
                    
                    Modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../types/">
            
                <a href="../types/">
            
                    
                    User defined types
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../types/struct.html">
            
                <a href="../types/struct.html">
            
                    
                    Structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../types/enum.html">
            
                <a href="../types/enum.html">
            
                    
                    Enum
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../types/aka.html">
            
                <a href="../types/aka.html">
            
                    
                    Aka
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../objects/">
            
                <a href="../objects/">
            
                    
                    Objects
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../objects/class.html">
            
                <a href="../objects/class.html">
            
                    
                    Class
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../objects/mutability.html">
            
                <a href="../objects/mutability.html">
            
                    
                    Mutability
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../objects/methods.html">
            
                <a href="../objects/methods.html">
            
                    
                    Methods
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../objects/inheritance.html">
            
                <a href="../objects/inheritance.html">
            
                    
                    Inheritance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../objects/traits.html">
            
                <a href="../objects/traits.html">
            
                    
                    Traits
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="../objects/cast.html">
            
                <a href="../objects/cast.html">
            
                    
                    Cast, and dynamic typing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../functions/">
            
                <a href="../functions/">
            
                    
                    Function advanced
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../pattern/">
            
                <a href="../pattern/">
            
                    
                    Pattern matching
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../errors/main.html">
            
                <a href="../errors/main.html">
            
                    
                    Error handling
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../errors/scope_guards.html">
            
                <a href="../errors/scope_guards.html">
            
                    
                    Scope guards
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../errors/catching.html">
            
                <a href="../errors/catching.html">
            
                    
                    Catching
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../errors/option.html">
            
                <a href="../errors/option.html">
            
                    
                    Exception and option type
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="../errors/fptr_closure.html">
            
                <a href="../errors/fptr_closure.html">
            
                    
                    Unsafe function pointer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../templates/">
            
                <a href="../templates/">
            
                    
                    Templates
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../templates/special.html">
            
                <a href="../templates/special.html">
            
                    
                    Template types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="../templates/cte.html">
            
                <a href="../templates/cte.html">
            
                    
                    Template values
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="../templates/values.html">
            
                <a href="../templates/values.html">
            
                    
                    Compilation time execution
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../objects/common_traits.html">
            
                <a href="../objects/common_traits.html">
            
                    
                    Common traits
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../traits/streamable.html">
            
                <a href="../traits/streamable.html">
            
                    
                    Streamable
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../traits/copiable.html">
            
                <a href="../traits/copiable.html">
            
                    
                    Copiable
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../traits/disposable.html">
            
                <a href="../traits/disposable.html">
            
                    
                    With guard and Disposable
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="../traits/hashable.html">
            
                <a href="../traits/hashable.html">
            
                    
                    Hashable
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.5" data-path="../traits/serialize.html">
            
                <a href="../traits/serialize.html">
            
                    
                    Packable and Serializable
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="../templates/operators.html">
            
                <a href="../templates/operators.html">
            
                    
                    Operator overloading
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="../templates/binary.html">
            
                <a href="../templates/binary.html">
            
                    
                    Unary, binary and Comparison
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="../templates/complex_operators.html">
            
                <a href="../templates/complex_operators.html">
            
                    
                    Access, contains and iteration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../version/">
            
                <a href="../version/">
            
                    
                    Version
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="../macros/">
            
                <a href="../macros/">
            
                    
                    Macro
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="../macros/std.html">
            
                <a href="../macros/std.html">
            
                    
                    Std and Core macros
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="../documentation/">
            
                <a href="../documentation/">
            
                    
                    Documentation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="../documentation/types.html">
            
                <a href="../documentation/types.html">
            
                    
                    Types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="../documentation/symbols.html">
            
                <a href="../documentation/symbols.html">
            
                    
                    Symbols
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Modules</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-minus-circle"></i><ul><li><span class="title-icon "></span><a href="#modules"><b>1. </b>Modules</a></li><ul><li><span class="title-icon "></span><a href="#file-hierarchy"><b>1.1. </b>File hierarchy</a></li><li><span class="title-icon "></span><a href="#sub-modules"><b>1.2. </b>Sub modules</a></li><li><span class="title-icon "></span><a href="#privacy"><b>1.3. </b>Privacy</a></li><ul><li><span class="title-icon "></span><a href="#example"><b>1.3.1. </b>Example</a></li></ul><li><span class="title-icon "></span><a href="#symbol-conflict-resolution"><b>1.4. </b>Symbol conflict resolution</a></li><li><span class="title-icon "></span><a href="#public-importation"><b>1.5. </b>Public importation</a></li><ul><li><span class="title-icon "></span><a href="#best-practice"><b>1.5.1. </b>Best practice</a></li></ul><li><span class="title-icon "></span><a href="#include-directory"><b>1.6. </b>Include directory</a></li><li><span class="title-icon "></span><a href="#compilation-of-modules"><b>1.7. </b>Compilation of modules</a></li></ul></ul></div><a href="#modules" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="modules"><a name="modules" class="anchor-navigation-ex-anchor" href="#modules"><i class="fa fa-link" aria-hidden="true"></i></a>1. Modules</h1>
<p>When creating a large project, it is very important to organize your
code. <em>Ymir</em> offers a system of modules, which is used to manage
different parts of the code that have different purposes. Each source
file in <em>Ymir</em> is a module.</p>
<h2 id="file-hierarchy"><a name="file-hierarchy" class="anchor-navigation-ex-anchor" href="#file-hierarchy"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. File hierarchy</h2>
<p>Lets have a look at the following file hierarchy : </p>
<pre class="language-"><code>.
&#x251C;&#x2500;&#x2500; main.yr
&#x2514;&#x2500;&#x2500; extern_modules
    &#x251C;&#x2500;&#x2500; bar.yr
    &#x2514;&#x2500;&#x2500; foo.yr

1 directory, 3 files
</code></pre><p><br>
In this file hierarchy there are three files, which contain modules, the
first module in the file <code>main.yr</code> will be named <code>main</code>. The second
one in the <code>extern_modules/bar.yr</code> file will be named <code>extern_modules::bar</code>,
and the third one in the <code>extern_modules/foo.yr</code> file will be named
<code>extern_modules::foo</code>.</p>
<p>To be properly importable, the module must be defined from the
relative path of the compilation, i.e. if the file is located in
<code>$(pwd)/relative/path/to/file</code>, its module name must be
<code>relative::path::to::file</code>.</p>
<p>The name of a module is defined by the first line of the source code,
by keyword <code>mod</code>. If this line is not given by the user, the path of
the module will only be the file name, so you will not always be able
to import the module, depending on its relative path. You can consider
this line mandatory for the moment. </p>
<p>For example, in the file <code>foo.yr</code>, the first line must look like : </p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">mod</span> <span class="token path">extern_modules</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">foo</span>
</code></pre>
<p><br></p>
<p>And, it will therefore be importable everywhere, for example in the
<code>main</code> module, when writing the import declaration :</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">extern_modules</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">foo</span>
</code></pre>
<p><br> </p>
<p>The syntax of the import statement is the following :</p>
<pre class="language-"><code class="lang-grammar"><span class="token path">import_statement</span> <span class="token punctuation">:</span><span class="token operator">=</span> <span class="token string">&apos;import&apos;</span> path <span class="token punctuation">(</span><span class="token string">&apos;,&apos;</span> path<span class="token punctuation">)</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token string">&apos;;&apos;</span><span class="token punctuation">)</span>?
<span class="token path">path</span> <span class="token punctuation">:</span><span class="token operator">=</span> Identifier <span class="token punctuation">(</span><span class="token string">&apos;::&apos;</span> Identifier<span class="token punctuation">)</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token string">&apos;::&apos;</span> <span class="token string">&apos;_&apos;</span><span class="token punctuation">)</span>?
</code></pre>
<h2 id="sub-modules"><a name="sub-modules" class="anchor-navigation-ex-anchor" href="#sub-modules"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. Sub modules</h2>
<p>Sub modules are local modules, declared inside a global modules, are
inside another sub module. Unlike global module, the access to the
symbols defined inside them is not implicit. For that reason they have
to be explicitely mentionned when trying to access to their
symbols. This mention is done with the double colon binary operator
<strong><code>::</code></strong>, where the first operand is the name of the module, and the
second the name of the symbol to access.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">mod</span> main
<span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span><span class="token punctuation">;</span>

<span class="token keyword">mod</span> InnerModule <span class="token punctuation">{</span>

    <span class="token other-keyword">pub</span> <span class="token keyword">def</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">println</span> <span class="token punctuation">(</span><span class="token string">&quot;Foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token path">InnerModule</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// access of the function declared in InnerModule</span>
<span class="token punctuation">}</span>
</code></pre>
<p>The access operator <strong><code>::</code></strong>, can also be used to access to symbols
declared inside global modules. This will be discussed after talking
about privacy of symbols.</p>
<h2 id="privacy"><a name="privacy" class="anchor-navigation-ex-anchor" href="#privacy"><i class="fa fa-link" aria-hidden="true"></i></a>1.3. Privacy</h2>
<p>All symbols defined in a module are private by default. The privacy of
a given symbol <em>s</em> refer to the possibility for foreign modules, and
symbols to access to this given symbol <em>s</em>. When a symbol <em>s</em> is
declared private in a module <em>s</em>, then only the other symbols of the
module <em>m</em> have access to it. Module privacy can be seen as a tree,
where a global module is a root, and module symbols are the branches
and leaves of the tree. In such a tree, symbols have access to their
parent, siblings, and the siblings of their parents. </p>
<p>In the following figure an example of a module tree is presented,
where a global module named <em>A</em>, has three symbols, 2 sub modules
<em>A::X</em> and <em>A::Y</em>, and a function <em>A::foo</em>. In this tree, we assume
that every symbols are declared private. For that reason, the function
<em>A::foo</em> has access to <em>A</em>, <em>A::X</em>, <em>A::Y</em>, but not to <em>A::X::bar</em>,
nor <em>A::Y::baz</em>. The symbol <em>A::X::bar</em>, has access to every symbols
(<em>A</em>, <em>A::X</em>, <em>A::Y</em>, <em>A::foo</em>), except <em>A::Y::baz</em>.</p>
<p><br></p>
<p><img src="https://gnu-ymir.github.io/Documentations/en/modules/tree.png" alt="drawing" height="300" style="display: block; margin-left: auto;  margin-right: auto;"></p>
<p><br></p>
<p>Global modules are always tree roots, for that reason they don&apos;t have
parents. For example, the module <strong><code>extern_modules::foo</code></strong>, does not
have access to the symbols declared inside the module
<strong><code>extern_modules</code></strong>, (if they are privates).</p>
<p>The keyword <strong><code>pub</code></strong> flag a symbol as <em>public</em>, and accessible by
foreign modules. This keyword can be used as a block, or for only one
symbol. Its syntax grammar is presented in the following code block.</p>
<pre class="language-"><code class="lang-grammar"><span class="token other-keyword">pub</span> <span class="token punctuation">:</span><span class="token operator">=</span>   <span class="token string">&apos;pub&apos;</span> <span class="token string">&apos;{&apos;</span> symbol<span class="token operator">*</span> <span class="token string">&apos;}&apos;</span> 
       <span class="token operator">|</span> <span class="token string">&apos;pub&apos;</span> symbol
</code></pre>
<h3 id="example"><a name="example" class="anchor-navigation-ex-anchor" href="#example"><i class="fa fa-link" aria-hidden="true"></i></a>1.3.1. Example</h3>
<p>1) Module <em><code>extern_modules/foo.yr</code></em></p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">mod</span> <span class="token path">extern_modules</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">foo</span><span class="token punctuation">;</span>

<span class="token comment">/**</span>
<span class="token comment"> * foo is public, it can be accessed from foreign modules</span>
<span class="token comment"> */</span>
<span class="token other-keyword">pub</span> <span class="token keyword">def</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">/**</span>
<span class="token comment"> * The bar function is private by default</span>
<span class="token comment"> * Thus only usable in this module</span>
<span class="token comment"> */</span>
<span class="token keyword">def</span> <span class="token function">bar</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre>
<p><br></p>
<p>2) Module <em><code>main.yr</code></em></p>
<pre class="language-"><code class="lang-ymir"><span class="token comment">/**</span>
<span class="token comment"> * This importation will give access to all the symbols in the module</span>
<span class="token comment"> * &apos;extern_modules::foo&apos; that have been declared &apos;public&apos;</span>
<span class="token comment"> */</span>
<span class="token keyword">import</span> <span class="token path">extern_modules</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">foo</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// foo is public we can call it</span>
    <span class="token function">bar</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// however, bar is private thus not accessible</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Errors:</p>
<pre class="language-"><code class="lang-error"><span class="token path">Error</span> : undefined symbol bar
 <span class="token comment">--&gt; main.yr:(7,5)</span>
 7  &#x2503;     bar (); // however, bar is private thus not accessible
    &#x254B;     ^^^
    &#x2503; <span class="token other-keyword">Note</span> : bar <span class="token comment">--&gt; extern_modules/foo.yr:(8,5) : extern_modules::foo::bar is private within this context</span>
    &#x2517;&#x2501;&#x2501;&#x2501;&#x2501;&#x2501;&#x2501; 


ymir1: <span class="token path">fatal error</span>: 
compilation terminated.
</code></pre>
<p><br></p>
<h2 id="symbol-conflict-resolution"><a name="symbol-conflict-resolution" class="anchor-navigation-ex-anchor" href="#symbol-conflict-resolution"><i class="fa fa-link" aria-hidden="true"></i></a>1.4. Symbol conflict resolution</h2>
<p>When two external global modules declare two symbols with the same
name, it may be impossible to know which symbol the user is refereing
to. In this case, the double colon operator <strong><code>::</code></strong> can be used with
the name of the module declaring the symbol to resolve the
ambiguity. To give an example of symbol conflict, let&apos;s say that we
have two module <code>extern_modules::foo</code> and <code>extern_modules::bar</code>
declaring a function with the same signature <code>foo</code>.</p>
<p>1) Module <em><code>extern_modules/bar.yr</code></em></p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">mod</span> <span class="token path">extern_modules</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">bar</span>
<span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span>

<span class="token other-keyword">pub</span> <span class="token keyword">def</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span> <span class="token punctuation">(</span><span class="token string">&quot;Bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><br></p>
<p>2) Module <em><code>extern_modules/foo.yr</code></em></p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">mod</span> <span class="token path">extern_modules</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">foo</span>
<span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span>

<span class="token other-keyword">pub</span> <span class="token keyword">def</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span> <span class="token punctuation">(</span><span class="token string">&quot;Foo&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><br></p>
<p>In the <code>main</code> module, both modules <code>extern_modules::bar</code> and
<code>extern_modules::foo</code>, are imported. The main function presented below
refers to the symbol <strong><code>foo</code></strong>. In that case, there is no way to tell
which function will be used, <code>extern_modules::foo::foo</code> or
<code>extern_modules::bar::foo</code>. The compiler returns an error. One can
note that this errors occurs only because the signature of the two
function <code>foo</code> are the same (taking no parameters), and they are both
public. If there was a difference in their prototypes, for example if
the function in the module <code>extern_modules::bar</code> would take a value of
type <code>i32</code> as parameter, the conflict would be resolved by itself, as
the call expression will be different.</p>
<p>3) Module <em><code>main.yr</code></em></p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">extern_modules</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">bar</span><span class="token punctuation">,</span> <span class="token path">extern_modules</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">foo</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Errors:</p>
<pre class="language-"><code class="lang-error"><span class="token path">Error</span> : {extern_modules::bar::foo ()-&gt; void, extern_modules::foo::foo ()-&gt; void, mod extern_modules::foo} x 3 called with {} work with both
 <span class="token comment">--&gt; main.yr:(4,6)</span>
 4  &#x2503;     foo ();
    &#x254B;         ^
    &#x2503; <span class="token other-keyword">Note</span> : candidate foo <span class="token comment">--&gt; extern_modules/bar.yr:(4,9) : extern_modules::bar::foo ()-&gt; void</span>
    &#x2503; <span class="token other-keyword">Note</span> : candidate foo <span class="token comment">--&gt; extern_modules/foo.yr:(4,9) : extern_modules::foo::foo ()-&gt; void</span>
    &#x2517;&#x2501;&#x2501;&#x2501;&#x2501;&#x2501;&#x2501; 


ymir1: <span class="token path">fatal error</span>: 
compilation terminated.
</code></pre>
<p><br></p>
<p>.page-inner {
  width: 95%;
}
In the above error, we can see that three modules are presented. The
two functions <strong><code>foo</code></strong> &#x2014; in <strong><code>extern_modules::bar</code></strong>, and
<strong><code>extern_modules::foo</code></strong> &#x2014; and the <strong><code>extern_modules::foo</code></strong> module
itself. Obviously, it is not possible to use the call operator
<strong><code>()</code></strong> on a module, that is why it is not presented as a possible
canditate in the notes of the error.</p>
<p>The conflict problem can be resolved by changing the calling
expression, and using the double colon operator <strong><code>::</code></strong>. In the
following example, the full name of the module is used. This is not
always necessary, as <strong><code>bar::foo</code></strong> is sufficient to refer to
<strong><code>extern_modules::bar::foo</code></strong>, and <strong><code>foo::foo</code></strong> for function
<strong><code>foo</code></strong> in <strong><code>extern_modules::foo</code></strong>.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">extern_modules</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">bar</span><span class="token punctuation">,</span> <span class="token path">extern_modules</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">foo</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token path">extern_modules</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">bar</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token path">extern_modules</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">foo</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 

    <span class="token path">foo</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token path">bar</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p>Results:</p>
<pre class="language-"><code>Bar
Foo
Foo
Bar
</code></pre><p><br></p>
<h2 id="public-importation"><a name="public-importation" class="anchor-navigation-ex-anchor" href="#public-importation"><i class="fa fa-link" aria-hidden="true"></i></a>1.5. Public importation</h2>
<p>As for all declaration, importation are private. It means that the
importation is not recursive. For example, if the module
<code>extern_modules::foo</code> imports the module <code>extern_modules::bar</code>, and the
module <code>main</code> import the module <code>extern_modules::foo</code>, all the public
symbols declared in <code>extern_modules::bar</code> will not be accessible in the
module <code>main</code>.</p>
<p>You can of course, make a <code>pub</code> importation, to make the symbols of
the module <code>extern_modules::bar</code> visible for the module <code>main</code>.</p>
<p>1) Module <em><code>extern_modules/bar.yr</code></em></p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">mod</span> <span class="token path">extern_modules</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">bar</span>
<span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span>

<span class="token other-keyword">pub</span> <span class="token keyword">def</span> <span class="token function">bar</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span> <span class="token punctuation">(</span><span class="token string">&quot;Bar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><br></p>
<p>2) Module <em><code>extern_modules/foo.yr</code></em></p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">mod</span> <span class="token path">extern_modules</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">foo</span>

<span class="token other-keyword">pub</span> <span class="token keyword">import</span> <span class="token path">extern_modules</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">bar</span>
</code></pre>
<p><br></p>
<p>3) Module <em><code>main.yr</code></em></p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">mod</span> main
<span class="token keyword">import</span> <span class="token path">extern_modules</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">foo</span><span class="token punctuation">;</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">bar</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><br></p>
<p>In the example above, the function <strong><code>bar</code></strong> defined in the module
<strong><code>extern_modules::bar</code></strong>, is imported (because the function is public
is public) by the module <strong><code>extern_modules::foo</code></strong>. This importation
is public, thus when the module <strong><code>main</code></strong> imports the module
<strong><code>extern_modules::foo</code></strong>, it also imports the module
<strong><code>extern_modules::bar</code></strong>, and has access to the function <strong><code>bar</code></strong>. </p>
<h3 id="best-practice"><a name="best-practice" class="anchor-navigation-ex-anchor" href="#best-practice"><i class="fa fa-link" aria-hidden="true"></i></a>1.5.1. Best practice</h3>
<p>Public importation must be used with caution, to avoid polluting other
modules. A good practice, is to define some modules only to make
public importations. These modules should be named <strong><code>_</code></strong>. For
example, with our previous file hierarchy, a file
<strong><code>extern_modules/_.yr</code></strong> would be added, and no public imports made
in the modules <strong><code>extern_modules::foo</code></strong>, nor in the module
<strong><code>extern_modules::bar</code></strong>.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">mod</span> <span class="token path">extern_modules</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">_</span><span class="token punctuation">;</span>

<span class="token other-keyword">pub</span> <span class="token keyword">import</span> <span class="token path">extern_modules</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">foo</span><span class="token punctuation">;</span>
<span class="token other-keyword">pub</span> <span class="token keyword">import</span> <span class="token path">extern_modules</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">bar</span><span class="token punctuation">;</span>
</code></pre>
<p><br></p>
<p>These modules are not automatically generated by <em>Ymir</em> &#x2014; even if it
seems trivial &#x2014;, to allow importing only a subset of the modules
contained in a sub directory. These importation modules are optional
and left to the choice of the user.</p>
<h2 id="include-directory"><a name="include-directory" class="anchor-navigation-ex-anchor" href="#include-directory"><i class="fa fa-link" aria-hidden="true"></i></a>1.6. Include directory</h2>
<p>You can use the <code>-I</code> option, to add a path to the include
directory. This path will be used as if it was the current <code>$(pwd)</code>. In
other words, if you add the <code>I -path/to/modules</code> option, and you have a
file in <code>path/to/modules/relative/to/my/file</code>, the name of the module
must be <code>relative::to::my::file</code>.</p>
<pre class="language-"><code class="lang-bash">gyc -I ~/libs/ main.yr
</code></pre>
<p>This is how the standard library is included in the build, and how you
can access modules in <code>std::</code> that are not located in <code>$(pwd)/std/</code>.</p>
<h2 id="compilation-of-modules"><a name="compilation-of-modules" class="anchor-navigation-ex-anchor" href="#compilation-of-modules"><i class="fa fa-link" aria-hidden="true"></i></a>1.7. Compilation of modules</h2>
<p>All modules must be compiled, the <code>import</code> declaration is just a
directive of for symbols access, but does not compile the imported
symbols. For example, in the following example, there are two modules,
one declaring a function <strong><code>foo</code></strong>, and the other importing it and
calling it. </p>
<p>1) Module <em><code>main.yr</code></em></p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">mod</span> main
<span class="token keyword">import</span> <span class="token path">extern_modules</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">foo</span><span class="token punctuation">;</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><br></p>
<p>2) Module <em><code>extern_modules/foo.yr</code></em></p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">mod</span> <span class="token path">extern_modules</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">foo</span>

<span class="token other-keyword">pub</span> <span class="token keyword">def</span> <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre>
<p><br></p>
<p>By compiling only the <strong><code>main</code></strong> function, the compiler returns a link
error. This error means that the symbol <code>foo</code> declared in the module
<code>extern_modules::foo</code> was not found during the symbol linkage. </p>
<pre class="language-"><code>$ gyc main.yr
/tmp/ccCOeXDq.o: In function `_Y4mainFZv&apos;:
main.yr:(.text+0x3e): undefined reference to `_Y14extern_modules3foo3fooFZv&apos;
collect2: error: ld returned 1 exit status
</code></pre><p><br></p>
<p>To avoid this error, and create a valid executable, where all symbols
can be found, the module <strong><code>extern_modules::foo</code></strong> has to be compiled
as well. <em>GYC</em> is able to manage object files (containing pre compiled
symbols), and compiled libraries. The way <em>GYC</em> manage these kind of
objects is similar to all compiler of the <em>GCC suite</em>, and is not
presented in this documentation (<em>cf.</em> <a href="https://gcc.gnu.org/onlinedocs/gcc-9.3.0/gcc/Link-Options.html#Link-Options" target="_blank">GCC options for linking</a>).</p>
<pre class="language-"><code>$ gyc main.yr extern_modules/foo.yr
</code></pre>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../advanced/pure.html" class="navigation navigation-prev " aria-label="Previous page: Pure values">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../types/" class="navigation navigation-next " aria-label="Next page: User defined types">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Modules","level":"1.5","depth":1,"next":{"title":"User defined types","level":"1.6","depth":1,"path":"types/README.md","ref":"types/README.md","articles":[{"title":"Structure","level":"1.6.1","depth":2,"path":"types/struct.md","ref":"types/struct.md","articles":[]},{"title":"Enum","level":"1.6.2","depth":2,"path":"types/enum.md","ref":"types/enum.md","articles":[]},{"title":"Aka","level":"1.6.3","depth":2,"path":"types/aka.md","ref":"types/aka.md","articles":[]}]},"previous":{"title":"Pure values","level":"1.4.5","depth":2,"path":"advanced/pure.md","ref":"advanced/pure.md","articles":[]},"dir":"ltr"},"config":{"plugins":["prism","-highlight","katex","codeblock-filename","spoiler","folding-menu","language-picker","anchor-nav-x","code"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"css":["themes/code.css"]},"spoiler":{},"language-picker":{"grid-columns":3},"search":{},"folding-menu":{"animationDuration":400,"sticky":false},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"code":{"copyButtons":true},"katex":{},"fontsettings":{"theme":"white","family":"sans","size":2},"anchor-navigation-ex":{"isRewritePageTitle":false,"toolTipMode":"click"},"codeblock-filename":{},"anchor-nav-x":{"associatedWithSummary":true,"float":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showLevel":true},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"modules/README.md","mtime":"2021-07-29T15:21:26.745Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-08-11T08:33:50.893Z"},"basePath":"..","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-spoiler/spoiler.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-folding-menu/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-language-picker/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-anchor-nav-x/lib/handler.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

