
<!DOCTYPE HTML>
<html lang="en" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Template types Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/code.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-katex/katex.min.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-codeblock-filename/block.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-spoiler/spoiler.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-language-picker/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-anchor-nav-x/style/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-code/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="cte.html" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../hello-world/">
            
                <a href="../hello-world/">
            
                    
                    Hello World
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../hello-world/commentaires.html">
            
                <a href="../hello-world/commentaires.html">
            
                    
                    Comments
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../primitives/">
            
                <a href="../primitives/">
            
                    
                    Basic programming concepts
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../primitives/variables.html">
            
                <a href="../primitives/variables.html">
            
                    
                    Variable and Mutability
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../primitives/types.html">
            
                <a href="../primitives/types.html">
            
                    
                    Data types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../primitives/functions.html">
            
                <a href="../primitives/functions.html">
            
                    
                    Functions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../primitives/control.html">
            
                <a href="../primitives/control.html">
            
                    
                    Control flows
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../primitives/operator.html">
            
                <a href="../primitives/operator.html">
            
                    
                    Operator priority
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../advanced/">
            
                <a href="../advanced/">
            
                    
                    Alias and References
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../advanced/references.html">
            
                <a href="../advanced/references.html">
            
                    
                    References
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../advanced/alias.html">
            
                <a href="../advanced/alias.html">
            
                    
                    Aliases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../advanced/copies.html">
            
                <a href="../advanced/copies.html">
            
                    
                    Copy and Deep copy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../advanced/best.html">
            
                <a href="../advanced/best.html">
            
                    
                    Best practice
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../modules/">
            
                <a href="../modules/">
            
                    
                    Modules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../types/">
            
                <a href="../types/">
            
                    
                    User defined types
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../types/struct.html">
            
                <a href="../types/struct.html">
            
                    
                    Structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../types/enum.html">
            
                <a href="../types/enum.html">
            
                    
                    Enum
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../types/aka.html">
            
                <a href="../types/aka.html">
            
                    
                    Aka
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../objects/">
            
                <a href="../objects/">
            
                    
                    Objects
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../objects/class.html">
            
                <a href="../objects/class.html">
            
                    
                    Class
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../objects/mutability.html">
            
                <a href="../objects/mutability.html">
            
                    
                    Mutability
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../objects/methods.html">
            
                <a href="../objects/methods.html">
            
                    
                    Methods
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.4" data-path="../objects/inheritance.html">
            
                <a href="../objects/inheritance.html">
            
                    
                    Inheritance
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.5" data-path="../objects/traits.html">
            
                <a href="../objects/traits.html">
            
                    
                    Traits
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.6" data-path="../objects/cast.html">
            
                <a href="../objects/cast.html">
            
                    
                    Cast, and dynamic typing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../functions/">
            
                <a href="../functions/">
            
                    
                    Function advanced
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../pattern/">
            
                <a href="../pattern/">
            
                    
                    Pattern matching
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../errors/main.html">
            
                <a href="../errors/main.html">
            
                    
                    Error handling
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="../errors/scope_guards.html">
            
                <a href="../errors/scope_guards.html">
            
                    
                    Scope guards
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="../errors/catching.html">
            
                <a href="../errors/catching.html">
            
                    
                    Catching
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="../errors/option.html">
            
                <a href="../errors/option.html">
            
                    
                    Exception and option type
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="../errors/fptr_closure.html">
            
                <a href="../errors/fptr_closure.html">
            
                    
                    Unsafe function pointer
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="./">
            
                <a href="./">
            
                    
                    Templates
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="1.11.1" data-path="special.html">
            
                <a href="special.html">
            
                    
                    Template types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="cte.html">
            
                <a href="cte.html">
            
                    
                    Template values
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="values.html">
            
                <a href="values.html">
            
                    
                    Compilation time execution
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../objects/common_traits.html">
            
                <a href="../objects/common_traits.html">
            
                    
                    Common traits
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../traits/streamable.html">
            
                <a href="../traits/streamable.html">
            
                    
                    Streamable
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../traits/copiable.html">
            
                <a href="../traits/copiable.html">
            
                    
                    Copiable
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../traits/disposable.html">
            
                <a href="../traits/disposable.html">
            
                    
                    With guard and Disposable
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="../traits/hashable.html">
            
                <a href="../traits/hashable.html">
            
                    
                    Hashable
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.5" data-path="../traits/serialize.html">
            
                <a href="../traits/serialize.html">
            
                    
                    Packable and Serializable
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.13" data-path="operators.html">
            
                <a href="operators.html">
            
                    
                    Operator overloading
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.13.1" data-path="binary.html">
            
                <a href="binary.html">
            
                    
                    Unary, binary and Comparison
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.13.2" data-path="complex_operators.html">
            
                <a href="complex_operators.html">
            
                    
                    Access, contains and iteration
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.14" data-path="../version/">
            
                <a href="../version/">
            
                    
                    Version
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.15" data-path="../macros/">
            
                <a href="../macros/">
            
                    
                    Macro
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.15.1" data-path="../macros/std.html">
            
                <a href="../macros/std.html">
            
                    
                    Std and Core macros
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.16" data-path="../documentation/">
            
                <a href="../documentation/">
            
                    
                    Documentation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.16.1" data-path="../documentation/types.html">
            
                <a href="../documentation/types.html">
            
                    
                    Types
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.16.2" data-path="../documentation/symbols.html">
            
                <a href="../documentation/symbols.html">
            
                    
                    Symbols
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Template types</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <div id="anchor-navigation-ex-navbar"><i class="fa fa-minus-circle"></i><ul><li><span class="title-icon "></span><a href="#template-specialization"><b>1. </b>Template specialization</a></li><ul><li><span class="title-icon "></span><a href="#of-filter"><b>1.1. </b>Of filter</a></li><li><span class="title-icon "></span><a href="#struct-and-class-filters"><b>1.2. </b>Struct and Class filters</a></li><li><span class="title-icon "></span><a href="#implement-filter"><b>1.3. </b>Implement filter</a></li><li><span class="title-icon "></span><a href="#variadic-templates"><b>1.4. </b>Variadic templates</a></li><ul><li><span class="title-icon "></span><a href="#recursive-variadic-template"><b>1.4.1. </b>Recursive variadic template</a></li></ul></ul></ul></div><a href="#template-specialization" id="anchorNavigationExGoTop"><i class="fa fa-arrow-up"></i></a><h1 id="template-specialization"><a name="template-specialization" class="anchor-navigation-ex-anchor" href="#template-specialization"><i class="fa fa-link" aria-hidden="true"></i></a>1. Template specialization</h1>
<p>We have seen in the last chapter, the declaration of template symbol,
that can be instanciated using any types. Sometimes, it can be usefull
to restrict the set of types that can be used in a given template
symbol (e.g. only slices but of any type, only classes, only
structures, etc.). In order to make this possible, the <em>Ymir</em> language
offers some elements to filter the different types that can be used.</p>
<p>The following code block present the complete syntax of a template
parameter.</p>
<pre class="language-"><code class="lang-grammar"><span class="token path">template_parameter</span> <span class="token punctuation">:</span><span class="token operator">=</span> Identifier <span class="token operator">|</span> of_filter <span class="token operator">|</span> class_filter <span class="token operator">|</span> struct_filter <span class="token operator">|</span> impl_filter <span class="token operator">|</span> variadic_filter

<span class="token path">of_filter</span> <span class="token punctuation">:</span><span class="token operator">=</span> Identifier <span class="token string">&apos;of&apos;</span> type
<span class="token path">class_filter</span> <span class="token punctuation">:</span><span class="token operator">=</span> <span class="token string">&apos;class&apos;</span> Identifier
<span class="token path">struct_filter</span> <span class="token punctuation">:</span><span class="token operator">=</span> <span class="token string">&apos;struct&apos;</span> Identifier
<span class="token path">impl_filter</span> <span class="token punctuation">:</span><span class="token operator">=</span> Identifier impl type
<span class="token path">variadic_filter</span> <span class="token punctuation">:</span><span class="token operator">=</span> Identifier <span class="token string">&apos;...&apos;</span>
</code></pre>
<p><br></p>
<p>One can note that every template parameters have an Identifier. This
identifier are the root of the specialization tree. For example, in
the following template parameters <strong><code>{T of [U], U}</code></strong> there are two
roots, <strong><code>T</code></strong> and <strong><code>U</code></strong>. The root <strong><code>U</code></strong> is important, these
template parameters are different to <strong><code>{T of [U]}</code></strong>. In the first
case, the identifier <strong><code>U</code></strong> refers to a template type (as it is a
root of the parameters), and in the second case it refers directly to
a type that is named <strong><code>U</code></strong>, and that has to be declared somewhere.</p>
<h2 id="of-filter"><a name="of-filter" class="anchor-navigation-ex-anchor" href="#of-filter"><i class="fa fa-link" aria-hidden="true"></i></a>1.1. Of filter</h2>
<p>The <em>of filter</em> is declared using the keyword <strong><code>of</code></strong>. This filter is
used to specify the form of the type that can be used to instanciate
the template. The form can be any form of type, it can be for example
a slice, an array, a template symbol, etc. In the following example,
the first function <strong><code>foo</code></strong> declared at line <strong><code>6</code></strong>, is a template
function that can be instanciated using only <strong><code>T=i32</code></strong>. The second
function <strong><code>foo</code></strong> at line <strong><code>14</code></strong> use the <strong><code>of</code></strong> filter to inform
that the type <strong><code>T</code></strong> must have the same form as the type <strong><code>Z</code></strong>, but
does not filter the type <strong><code>Z</code></strong>. The third function <strong><code>foo</code></strong> at line
<strong><code>21</code></strong>, accepts for the type <strong><code>T</code></strong> any slice that have as internal
type a template type declared as <strong><code>Z</code></strong>, there is no filter on
<strong><code>Z</code></strong>.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span><span class="token punctuation">;</span>

<span class="token comment">/**</span>
<span class="token comment"> * This function will only be callable, with a i32 as T</span>
<span class="token comment"> */</span>
<span class="token keyword">def</span> foo <span class="token punctuation">{</span>T of <span class="token basic-types">i32</span><span class="token punctuation">}</span> <span class="token punctuation">(</span>_ <span class="token punctuation">:</span> T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span> <span class="token punctuation">(</span><span class="token string">&quot;First ??&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**</span>
<span class="token comment"> * This function will only be callable, with a type that fit the Z pattern</span>
<span class="token comment"> * That is to say every type</span>
<span class="token comment"> */</span>
<span class="token keyword">def</span> foo <span class="token punctuation">{</span>T of Z<span class="token punctuation">,</span> Z<span class="token punctuation">}</span> <span class="token punctuation">(</span>_ <span class="token punctuation">:</span> T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span> <span class="token punctuation">(</span><span class="token string">&quot;Second ?&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**</span>
<span class="token comment"> * This function will be only callable, with a slice of Z, where Z can be anything</span>
<span class="token comment"> */</span>
<span class="token keyword">def</span> foo <span class="token punctuation">{</span>T of <span class="token punctuation">[</span>Z<span class="token punctuation">]</span><span class="token punctuation">,</span> Z<span class="token punctuation">}</span> <span class="token punctuation">(</span>_ <span class="token punctuation">:</span> T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span> <span class="token punctuation">(</span><span class="token string">&quot;Third !&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><br></p>
<p>In the above example, one can note that, two functions can be called
by the expression <code>foo ([1, 2])</code>. The second and third ones. The
template definition that match the best the types, will be used. Here,
this is the third one, the filter is more specific and thus has a
better score.</p>
<p>Results: </p>
<pre class="language-"><code>Third !
</code></pre><p><br></p>
<p>The <em>of filter</em> is a kind of destructuring pattern. They can be
chained, and composed with other filters. Here some other example,
where this time the <em>of filter</em> is used to get the template types
parameters of a given class type, and apply some filter on them.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span><span class="token punctuation">;</span>

<span class="token comment">/** A template class, that takes any type as template parameters */</span>
<span class="token keyword">class</span> X <span class="token punctuation">{</span>T<span class="token punctuation">}</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> _x <span class="token punctuation">:</span> T<span class="token punctuation">;</span>

    <span class="token other-keyword">pub</span> <span class="token keyword">self</span> <span class="token punctuation">(</span>x <span class="token punctuation">:</span> T<span class="token punctuation">)</span> <span class="token keyword">with</span> _x <span class="token operator">=</span> x <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**</span>
<span class="token comment"> * This function accepts any X object, as long as its template parameter is a slice</span>
<span class="token comment"> */</span>
<span class="token keyword">def</span> foo <span class="token punctuation">{</span>T of <span class="token operator">&amp;</span><span class="token punctuation">(</span>X<span class="token operator">!</span><span class="token punctuation">{</span>U<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> U of <span class="token punctuation">[</span>Z<span class="token punctuation">]</span><span class="token punctuation">,</span> Z<span class="token punctuation">}</span> <span class="token punctuation">(</span>x <span class="token punctuation">:</span> T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span> <span class="token punctuation">(</span><span class="token string">&quot;Slice X : &quot;</span><span class="token punctuation">,</span> <span class="token path">x</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">typeinfo</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**</span>
<span class="token comment"> * Accept all the X objects, that have not been accepted by the first function</span>
<span class="token comment"> * Indeed, the template is less specific, and is used only if the first one fails</span>
<span class="token comment"> */</span>
<span class="token keyword">def</span> foo <span class="token punctuation">{</span>T of <span class="token operator">&amp;</span><span class="token punctuation">(</span>X<span class="token operator">!</span><span class="token punctuation">{</span>U<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span> U<span class="token punctuation">}</span> <span class="token punctuation">(</span>x <span class="token punctuation">:</span> T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span> <span class="token punctuation">(</span><span class="token string">&quot;Not a slice X : &quot;</span><span class="token punctuation">,</span> <span class="token path">x</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">typeinfo</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token path">X</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token other-keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token path">X</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token other-keyword">new</span> <span class="token punctuation">(</span><span class="token string">&quot;Test&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> c <span class="token operator">=</span> <span class="token path">X</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token other-keyword">new</span> <span class="token punctuation">(</span><span class="token number">23</span><span class="token punctuation">.</span>0f<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">foo</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">foo</span> <span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">foo</span> <span class="token punctuation">(</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><br>
Results: </p>
<pre class="language-"><code>Slice X : main::X([i32])::X
Slice X : main::X([c32])::X
Not a slice X : main::X(f32)::X
</code></pre><p><br></p>
<p>As presented in the introduction of this chapter, there is a
difference between identifier that can be found in the roots of the
template parameters and those which are not. In the following example,
the <strong><code>foo</code></strong> function accept a slice of <strong><code>U</code></strong> where <strong><code>U</code></strong> is not
defined, resulting in an error by the compiler. Indeed, the type
<strong><code>U</code></strong> could have been defined somewhere, and there must be a
distinction between this type and a template parameter.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span><span class="token punctuation">;</span>

<span class="token keyword">def</span> foo <span class="token punctuation">{</span>T of <span class="token punctuation">[</span>U<span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token punctuation">(</span>a <span class="token punctuation">:</span> T<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><br>
Errors: </p>
<pre class="language-"><code class="lang-error"><span class="token path">Error</span> : the call operator is not defined for foo {T of [U]}(a : T)-&gt; void and {mut [mut i32]}
 <span class="token comment">--&gt; main.yr:(6,6)</span>
 6  &#x2503;     foo ([1, 2]);
    &#x254B;         ^      ^
    &#x2503; <span class="token other-keyword">Note</span> : candidate foo <span class="token comment">--&gt; main.yr:(3,5) : foo {T of [U]}(a : T)-&gt; void</span>
    &#x2503;     &#x2503; <span class="token path">Error</span> : undefined type U
    &#x2503;     &#x2503;  <span class="token comment">--&gt; main.yr:(3,16)</span>
    &#x2503;     &#x2503;  3  &#x2503; def foo {T of [U]} (a : T) {}
    &#x2503;     &#x2503;     &#x254B;                ^
    &#x2503;     &#x2517;&#x2501;&#x2501;&#x2501;&#x2501;&#x2501;&#x253B;&#x2501; 
    &#x2517;&#x2501;&#x2501;&#x2501;&#x2501;&#x2501;&#x253B;&#x2501; 


ymir1: <span class="token path">fatal error</span>: 
compilation terminated.
</code></pre>
<h2 id="struct-and-class-filters"><a name="struct-and-class-filters" class="anchor-navigation-ex-anchor" href="#struct-and-class-filters"><i class="fa fa-link" aria-hidden="true"></i></a>1.2. Struct and Class filters</h2>
<p>The keywords <code>struct</code> and <code>class</code> defines respecitvely the <em>struct</em>
and <em>class filters</em>. They filter the accepted types of a template
symbol. Unlike <em>of filter</em> they cannot be chained, and accept only an
identifier. In the following example, the first <strong><code>foo</code></strong> function at
line <strong><code>11</code></strong> is instanciable using a class type, and the second at
line <strong><code>15</code></strong> only accept struct types. <strong>Warning</strong> <em>class filter</em>
accepts a reference class type, and not directly the class type
(<strong><code>&amp;A</code></strong> not <strong><code>A</code></strong>).</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span>

<span class="token keyword">struct</span> 
<span class="token operator">|</span> x <span class="token punctuation">:</span> <span class="token basic-types">i32</span>
<span class="token punctuation">-&gt;</span> X<span class="token punctuation">;</span>

<span class="token keyword">class</span> A <span class="token punctuation">{</span>
    <span class="token keyword">self</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> foo <span class="token punctuation">{</span><span class="token keyword">class</span> T<span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span> <span class="token punctuation">(</span><span class="token string">&quot;Class !&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> foo <span class="token punctuation">{</span><span class="token keyword">struct</span> T<span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span> <span class="token punctuation">(</span><span class="token string">&quot;Struct !&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">foo!</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>A<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">foo!</span><span class="token punctuation">(</span>X<span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><br>
Results:</p>
<pre class="language-"><code>Class !
Struct !
</code></pre><p><br></p>
<p>Even if this filters cannot be chained, they can be used as the leaf
of a <em>of filter</em>. In the following example, the function <strong><code>foo</code></strong>
accepts a slice of class objects.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> A <span class="token punctuation">{</span>
    <span class="token other-keyword">pub</span> <span class="token keyword">self</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token other-keyword">impl</span> Streamable<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> B <span class="token punctuation">{</span>
    <span class="token other-keyword">pub</span> <span class="token keyword">self</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token other-keyword">impl</span> Streamable<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> foo <span class="token punctuation">{</span>T of <span class="token punctuation">[</span>U<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">class</span> U<span class="token punctuation">}</span> <span class="token punctuation">(</span>a <span class="token punctuation">:</span> T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span> <span class="token punctuation">(</span><span class="token path">T</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">typeid</span><span class="token punctuation">,</span> <span class="token string">&quot; = &quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token path">[A</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token other-keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token path">A</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token other-keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token path">[B</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token other-keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><br>
Results: </p>
<pre class="language-"><code>[&amp;(main::A)] = [main::A(), main::A()]
[&amp;(main::B)] = [main::B()]
</code></pre><h2 id="implement-filter"><a name="implement-filter" class="anchor-navigation-ex-anchor" href="#implement-filter"><i class="fa fa-link" aria-hidden="true"></i></a>1.3. Implement filter</h2>
<p>We have seen in the chapter about traits
(<em>cf</em>. <a href="https://gnu-ymir.github.io/Documentations/en/objects/traits.html" target="_blank">Traits</a>),
that class type can implement a given trait. Implementing a trait
gives specific method to a class type, that can be called. However
traits lose most of their interest if it is impossible to accept a
type that implements the trait without knowning the type itself. This
cannot be done by inheritance, as traits are not types, however
templates have a specific filter to perform this operation. In the
following example, the <em>impl filter</em> is used by the <strong><code>foo</code></strong>
function, that thus accepts any kind of object as long as they impl
the trait <strong><code>Getter</code></strong>.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span><span class="token punctuation">;</span>

<span class="token keyword">trait</span> Getter <span class="token punctuation">{</span>
    <span class="token other-keyword">pub</span> <span class="token keyword">def</span> <span class="token function">get</span> <span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">-&gt;</span> <span class="token basic-types">i32</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> A <span class="token punctuation">{</span>

    <span class="token other-keyword">pub</span> <span class="token keyword">self</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token other-keyword">impl</span> Getter <span class="token punctuation">{</span>
        <span class="token other-keyword">pub</span> <span class="token keyword">over</span> <span class="token function">get</span> <span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">-&gt;</span> <span class="token basic-types">i32</span> <span class="token punctuation">{</span>
            <span class="token number">12</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">def</span> foo <span class="token punctuation">{</span>T <span class="token other-keyword">impl</span> Getter<span class="token punctuation">}</span> <span class="token punctuation">(</span>a <span class="token punctuation">:</span> T<span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> <span class="token basic-types">i32</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">.</span><span class="token function">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token path">A</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token other-keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">println</span> <span class="token punctuation">(</span><span class="token function">foo</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><br></p>
<p>A trait can be a template symbol. In that case it has some template
parameters, that can be destructured by a template filter. For
example, in the following source code, the trait <strong><code>Getter</code></strong> is a
template, that is implemented using the type <strong><code>i32</code></strong> by the class
<strong><code>A</code></strong>. The first <strong><code>foo</code></strong> function at line <strong><code>1</code></strong> accepts any kind
of object as long as they impl the trait <strong><code>Getter</code></strong>, and filter the
template parameter of this trait to get it under the identifier
<strong><code>X</code></strong>. The second <strong><code>foo</code></strong> function only accepts types that
implements the trait but using a slice. Because the second <strong><code>foo</code></strong>
function is more specific when using <strong><code>&amp;B</code></strong> object, it is called at
line <strong><code>44</code></strong>.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span><span class="token punctuation">;</span>

<span class="token keyword">trait</span> Getter <span class="token punctuation">{</span>T<span class="token punctuation">}</span> <span class="token punctuation">{</span>
    <span class="token other-keyword">pub</span> <span class="token keyword">def</span> <span class="token function">get</span> <span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">-&gt;</span> T<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> A <span class="token punctuation">{</span>

    <span class="token other-keyword">pub</span> <span class="token keyword">self</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token other-keyword">impl</span> Getter<span class="token operator">!</span><span class="token punctuation">{</span><span class="token basic-types">i32</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
        <span class="token other-keyword">pub</span> <span class="token keyword">over</span> <span class="token function">get</span> <span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">-&gt;</span> <span class="token basic-types">i32</span> <span class="token punctuation">{</span>
            <span class="token number">12</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> B <span class="token punctuation">{</span>

    <span class="token other-keyword">pub</span> <span class="token keyword">self</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

    <span class="token other-keyword">impl</span> Getter<span class="token operator">!</span><span class="token punctuation">{</span><span class="token punctuation">[</span><span class="token basic-types">i32</span><span class="token punctuation">]</span><span class="token punctuation">}</span> <span class="token punctuation">{</span>
        <span class="token other-keyword">pub</span> <span class="token keyword">over</span> <span class="token function">get</span> <span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">)</span><span class="token punctuation">-&gt;</span> <span class="token punctuation">[</span><span class="token basic-types">i32</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
            <span class="token punctuation">[</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> foo <span class="token punctuation">{</span>T <span class="token other-keyword">impl</span> Getter<span class="token operator">!</span><span class="token punctuation">{</span>X<span class="token punctuation">}</span><span class="token punctuation">,</span> X<span class="token punctuation">}</span> <span class="token punctuation">(</span>a <span class="token punctuation">:</span> T<span class="token punctuation">)</span> <span class="token punctuation">-&gt;</span> X <span class="token punctuation">{</span>
    <span class="token function">print</span> <span class="token punctuation">(</span><span class="token string">&quot;First : &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    a<span class="token punctuation">.</span><span class="token function">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> foo <span class="token punctuation">{</span>T <span class="token other-keyword">impl</span> Getter<span class="token operator">!</span><span class="token punctuation">{</span>X<span class="token punctuation">}</span><span class="token punctuation">,</span> X of <span class="token punctuation">[</span>U<span class="token punctuation">]</span><span class="token punctuation">,</span> U<span class="token punctuation">}</span> <span class="token punctuation">(</span>a <span class="token punctuation">:</span> T<span class="token punctuation">)</span><span class="token punctuation">-&gt;</span> X <span class="token punctuation">{</span>
    <span class="token function">print</span> <span class="token punctuation">(</span><span class="token string">&quot;Second : &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    a<span class="token punctuation">.</span><span class="token function">get</span> <span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token path">A</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token other-keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token path">B</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token other-keyword">new</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">println</span> <span class="token punctuation">(</span><span class="token function">foo</span> <span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">println</span> <span class="token punctuation">(</span><span class="token function">foo</span> <span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><br>
Results: </p>
<pre class="language-"><code>First : 12
Second : [12, 24]
</code></pre><p><br></p>
<h2 id="variadic-templates"><a name="variadic-templates" class="anchor-navigation-ex-anchor" href="#variadic-templates"><i class="fa fa-link" aria-hidden="true"></i></a>1.4. Variadic templates</h2>
<p>Variadic templates are special templates, that takes an arbitrary
number of type as arguments. They are defined using an identifier
followed by the token <code>...</code>. When the specialization is done, the
identifier of the variadic template, can be used to define a tuple
type. In the following example, the type of the parameter <strong><code>a</code></strong> of
the <strong><code>foo</code></strong> function is <strong><code>(i32, i32, i32, i32, i32)</code></strong>. <strong>Warning</strong>
If only one type is given to the variadic template, then it is not a
tuple, but directly the type that has been given. As you may have
guessed by now, the <code>println</code> function is a variadic template
function.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span>

<span class="token keyword">def</span> foo <span class="token punctuation">{</span>T <span class="token punctuation">...</span><span class="token punctuation">}</span> <span class="token punctuation">(</span>a <span class="token punctuation">:</span> T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span> <span class="token punctuation">(</span>a<span class="token number">.0</span><span class="token punctuation">,</span> expand a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><br>
Results: </p>
<pre class="language-"><code>112345
</code></pre><p><br></p>
<p>The identifier can also be used to complete another type. For example,
a function pointer type. In the following source code, the structure
<strong><code>X</code></strong> accepts an arbitrary number of type as template parameters,
and use them to form the type of the field <strong><code>foo</code></strong>. When
instanciated by the <strong><code>main</code></strong> function at line <strong><code>12</code></strong>, the field
<strong><code>foo</code></strong> takes the type <strong><code>fn (i32, f32)-&gt; void</code></strong>.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span>

<span class="token keyword">struct</span> 
<span class="token operator">|</span> foo <span class="token punctuation">:</span> <span class="token keyword">fn</span> <span class="token punctuation">(</span>T<span class="token punctuation">)</span><span class="token punctuation">-&gt;</span> void
 <span class="token punctuation">-&gt;</span> X <span class="token punctuation">{</span>T<span class="token punctuation">...</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">def</span> <span class="token function">foo</span> <span class="token punctuation">(</span>x <span class="token punctuation">:</span> <span class="token basic-types">i32</span><span class="token punctuation">,</span> y <span class="token punctuation">:</span> <span class="token type">f32</span><span class="token punctuation">)</span><span class="token punctuation">-&gt;</span> void <span class="token punctuation">{</span>
    <span class="token function">println</span> <span class="token punctuation">(</span><span class="token string">&quot;(&quot;</span><span class="token punctuation">,</span> x<span class="token punctuation">,</span> <span class="token string">&quot;, &quot;</span><span class="token punctuation">,</span> y<span class="token punctuation">,</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> x <span class="token operator">=</span> X<span class="token operator">!</span><span class="token punctuation">{</span><span class="token basic-types">i32</span><span class="token punctuation">,</span> f32<span class="token punctuation">}</span> <span class="token punctuation">(</span><span class="token operator">&amp;</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
    x<span class="token punctuation">.</span><span class="token function">foo</span> <span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">.</span>14f<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><br>
Results: </p>
<pre class="language-"><code>(12, 3.140000)
</code></pre><p><br></p>
<p>To force the type to be a tuple inside another type, the standard
syntax of tuple can be used. For example, the field <strong><code>foo</code></strong> could
have been defined as follows <strong><code>fn ((T,))-&gt; void</code></strong>, in that case it
would have been equal to <strong><code>fn ((i32, f32))-&gt; void</code></strong>, meaning a
function pointer that takes a parameter of type <strong><code>(i32, f32)</code></strong>, and
returns nothing.</p>
<h3 id="recursive-variadic-template"><a name="recursive-variadic-template" class="anchor-navigation-ex-anchor" href="#recursive-variadic-template"><i class="fa fa-link" aria-hidden="true"></i></a>1.4.1. Recursive variadic template</h3>
<p>Variadic template must contain at least one type. To perfom recursive
variadic function, end case functions must be written, this end case
generally contains a standard template parameter. For example, the
following example presents a <strong><code>foo</code></strong> function that takes variadic
parameters, and prints them. The end case is described at line
<strong><code>3</code></strong>, where the function takes only one standard template
parameter. The function <strong><code>foo</code></strong> at line <strong><code>8</code></strong> takes two template
parameter, a standard one that will be used for the first parameter of
the function, and a variadic one for the rest of the parameters. One
can note from the line <strong><code>5</code></strong> that even if the type of <strong><code>b</code></strong> is
<strong><code>c8</code></strong> and thus not a tuple, the keyword <strong><code>expand</code></strong> is usable, and
does nothing particular.</p>
<pre class="language-"><code class="lang-ymir"><span class="token keyword">import</span> <span class="token path">std</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">io</span><span class="token punctuation">;</span>

<span class="token keyword">def</span> foo <span class="token punctuation">{</span>F<span class="token punctuation">,</span> R<span class="token punctuation">...</span><span class="token punctuation">}</span> <span class="token punctuation">(</span>a <span class="token punctuation">:</span> F<span class="token punctuation">,</span> b <span class="token punctuation">:</span> R<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span> <span class="token punctuation">(</span><span class="token string">&quot;FST : &quot;</span><span class="token punctuation">,</span> <span class="token path">F</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">typeid</span><span class="token punctuation">,</span> <span class="token string">&quot;(&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">foo</span> <span class="token punctuation">(</span>expand b<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> foo <span class="token punctuation">{</span>F<span class="token punctuation">}</span> <span class="token punctuation">(</span>a <span class="token punctuation">:</span> F<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">println</span> <span class="token punctuation">(</span><span class="token string">&quot;SCD : &quot;</span><span class="token punctuation">,</span> <span class="token path">F</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token path">typeid</span><span class="token punctuation">,</span> <span class="token string">&quot;(&quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">,</span> <span class="token string">&quot;)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">def</span> <span class="token function">main</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">foo</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">.</span>f<span class="token punctuation">,</span> <span class="token string">&quot;Test&quot;</span><span class="token punctuation">,</span> <span class="token string">&apos;r&apos;</span><span class="token basic-types">c8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre>
<p><br></p>
<p>Results: </p>
<pre class="language-"><code>FST : i32(1)
FST : f32(3.000000)
FST : [c32](Test)
SCD : c8(r)
</code></pre>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: Templates">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="cte.html" class="navigation navigation-next " aria-label="Next page: Template values">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Template types","level":"1.11.1","depth":2,"next":{"title":"Template values","level":"1.11.2","depth":2,"path":"templates/cte.md","ref":"templates/cte.md","articles":[]},"previous":{"title":"Templates","level":"1.11","depth":1,"path":"templates/README.md","ref":"templates/README.md","articles":[{"title":"Template types","level":"1.11.1","depth":2,"path":"templates/special.md","ref":"templates/special.md","articles":[]},{"title":"Template values","level":"1.11.2","depth":2,"path":"templates/cte.md","ref":"templates/cte.md","articles":[]},{"title":"Compilation time execution","level":"1.11.3","depth":2,"path":"templates/values.md","ref":"templates/values.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["prism","-highlight","katex","codeblock-filename","spoiler","folding-menu","language-picker","anchor-nav-x","code"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"prism":{"css":["themes/code.css"]},"spoiler":{},"language-picker":{"grid-columns":3},"search":{},"folding-menu":{"animationDuration":400,"sticky":false},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"code":{"copyButtons":true},"katex":{},"fontsettings":{"theme":"white","family":"sans","size":2},"anchor-navigation-ex":{"isRewritePageTitle":false,"toolTipMode":"click"},"codeblock-filename":{},"anchor-nav-x":{"associatedWithSummary":true,"float":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"mode":"float","multipleH1":true,"pageTop":{"level1Icon":"","level2Icon":"","level3Icon":"","showLevelIcon":false},"printLog":false,"showLevel":true},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"language":"en","gitbook":"*"},"file":{"path":"templates/special.md","mtime":"2021-06-17T06:30:48.374Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2021-07-29T15:21:12.835Z"},"basePath":"..","book":{"language":"en"}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-spoiler/spoiler.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-folding-menu/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-language-picker/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-anchor-nav-x/lib/handler.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-code/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

